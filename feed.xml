<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://zhengstar94.github.io//feed.xml" rel="self" type="application/atom+xml"/><link href="https://zhengstar94.github.io//" rel="alternate" type="text/html" hreflang="en"/><updated>2024-06-22T07:03:26+00:00</updated><id>https://zhengstar94.github.io//feed.xml</id><title type="html">blank</title><subtitle>Welcome to Xingxing&apos;s blog, where I share my thoughts and experiences on various topics. </subtitle><entry><title type="html">JDBCBatchUpdate</title><link href="https://zhengstar94.github.io//blog/2023/JDBCBatchUpdate/" rel="alternate" type="text/html" title="JDBCBatchUpdate"/><published>2023-12-25T00:00:00+00:00</published><updated>2023-12-25T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/JDBCBatchUpdate</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/JDBCBatchUpdate/"><![CDATA[<h1 id="optimizing-large-scale-data-migration-from-sql-server-to-mysql-with-jdbc">Optimizing Large-scale Data Migration from SQL Server to MySQL with JDBC</h1> <h2 id="migration-challenge-transferring-2-million-records-from-sql-server-to-mysql">Migration Challenge: Transferring 2 Million Records from SQL Server to MySQL</h2> <p>I got a business requirement in some Sprint, i need to migration data(2,000,000) from SQL Serve to MySQL, because for some reason, can not use script to migrate. And there has some following requirements：</p> <ol> <li>Inability to use script for data migration.</li> <li>Migration must be performed using Java APIs.</li> <li>Synchronization time must be within 30 minutes.</li> <li>The process needs to be stable and free from exceptions.</li> </ol> <h2 id="approaches">Approaches</h2> <h3 id="1-method-1-using-jpas-saveall-function">1. Method 1: Using JPA’s <code class="language-plaintext highlighter-rouge">saveAll</code> Function</h3> <p><strong>Pseudo code</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">String</span> <span class="nf">patchData</span><span class="o">(</span><span class="nc">String</span> <span class="n">cursor</span><span class="o">){</span>
  <span class="n">log</span><span class="o">(</span><span class="s">"patch data Start"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  
  <span class="c1">// loop to get data one by one</span>
  <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
    <span class="n">num</span><span class="o">++;</span>
    
    <span class="nc">PatchData</span> <span class="n">patchData</span> <span class="o">=</span> <span class="n">patchDataService</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="n">cursor</span><span class="o">);</span>
    <span class="c1">// if list is null, then exit the loop</span>
    <span class="k">if</span><span class="o">(</span><span class="n">patchData</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">!</span><span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span>			<span class="o">{</span>
				<span class="c1">//get new cursor</span>
      	<span class="n">cursor</span> <span class="o">=</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getCursor</span><span class="o">();</span>
      	
      	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Data</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
      	
      	<span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">data</span> <span class="o">-&gt;{</span>
          <span class="nc">Data</span> <span class="n">newData</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Data</span><span class="o">();</span>
          <span class="n">newData</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
          <span class="n">newData</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
          <span class="n">newData</span><span class="o">.</span><span class="na">setDate</span><span class="o">(</span><span class="k">new</span> <span class="nc">Data</span><span class="o">());</span>
          <span class="n">dataList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newData</span><span class="o">);</span>
        <span class="o">})</span>
        <span class="c1">// save list  </span>
        <span class="nc">DataRepository</span><span class="o">.</span><span class="na">saveAll</span><span class="o">(</span><span class="n">dataList</span><span class="o">);</span>
      	<span class="n">log</span><span class="o">(</span><span class="s">"patch data: {} times"</span><span class="o">,</span> <span class="n">num</span><span class="o">);</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
      <span class="n">log</span><span class="o">(</span><span class="s">"patch data End"</span><span class="o">);</span>
      <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Execute Time</strong></p> <table> <thead> <tr> <th style="text-align: left">Data Size</th> <th style="text-align: left">ExecuteTime(ms)</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">100</td> <td style="text-align: left">555</td> </tr> <tr> <td style="text-align: left">200</td> <td style="text-align: left">693</td> </tr> <tr> <td style="text-align: left">500</td> <td style="text-align: left">1033</td> </tr> <tr> <td style="text-align: left">1000</td> <td style="text-align: left">1855</td> </tr> <tr> <td style="text-align: left">10000</td> <td style="text-align: left">19337</td> </tr> </tbody> </table> <blockquote> <p>If we want to insert 200 datas in batch and call saveAll () to pass the data set in, then we will execute <code class="language-plaintext highlighter-rouge">save()</code>200 times in turn. When execute <code class="language-plaintext highlighter-rouge">save()</code> to invoke MySQL in a java service, invoking an external service is itself a time-consuming operation in the service, and each execution of sql automatically opens and closes the transaction after the transaction has been executed. So using <code class="language-plaintext highlighter-rouge">saveAll ()</code> to do bulk inserts can be very time consuming.</p> </blockquote> <p><strong>Performance Analysis</strong>:</p> <ul> <li>Suitable for moderate data sizes.</li> <li>Performance deteriorates significantly as data volume increases. For instance, inserting 10,000 records takes approximately 19 seconds.</li> <li>Prone to potential OutOfMemory errors with very large data sets.</li> </ul> <h3 id="2-method-2-using-entitymanager">2. Method 2: Using <code class="language-plaintext highlighter-rouge">EntityManager</code></h3> <p><strong>Pseudo code</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">String</span> <span class="nf">patchData</span><span class="o">(</span><span class="nc">String</span> <span class="n">cursor</span><span class="o">){</span>
  <span class="nc">EntityManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="n">entityManagerFactoryBean</span><span class="o">.</span><span class="na">getObject</span><span class="o">.</span><span class="na">createEntityManager</span><span class="o">();</span>
  <span class="nc">EntityTransaction</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
  
  <span class="n">log</span><span class="o">(</span><span class="s">"patch data Start"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="c1">// loop to get data one by one</span>
  <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
    <span class="n">num</span><span class="o">++;</span>
    
    <span class="nc">PatchData</span> <span class="n">patchData</span> <span class="o">=</span> <span class="n">patchDataService</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="n">cursor</span><span class="o">);</span>
    <span class="c1">// if list is null, then exit the loop</span>
    <span class="k">if</span><span class="o">(</span><span class="n">patchData</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">!</span><span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span>			<span class="o">{</span>
				<span class="c1">//get new cursor</span>
      	<span class="n">cursor</span> <span class="o">=</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getCursor</span><span class="o">();</span>
      	
      	<span class="nc">StringBuilder</span> <span class="n">insertsql</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      	<span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"INSERT INTO DATA (ID, NAME, DATE) VALUES"</span><span class="o">)</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="nc">PatchData</span> <span class="nl">data:</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()){</span>
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" (\'"</span><span class="o">)</span>
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\', "</span><span class="o">)</span> 
            
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" \'"</span><span class="o">)</span>
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
          <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\', now())"</span><span class="o">)</span>  
           
          <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()){</span>
            <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">";"</span><span class="o">);</span>
          <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="n">insertsql</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">","</span><span class="o">);</span>
          <span class="o">}</span>  
        <span class="o">}</span>  
        
        <span class="n">transaction</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
      	<span class="n">manager</span><span class="o">.</span><span class="na">createNativeQuery</span><span class="o">(</span><span class="n">insertsql</span><span class="o">.</span><span class="na">toString</span><span class="o">).</span><span class="na">executeUpdate</span><span class="o">();</span>
        <span class="n">transaction</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
      	<span class="n">manager</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
      	<span class="n">log</span><span class="o">(</span><span class="s">"patch data: {} times"</span><span class="o">,</span> <span class="n">num</span><span class="o">);</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
      <span class="n">log</span><span class="o">(</span><span class="s">"patch data End"</span><span class="o">);</span>
      <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <table> <thead> <tr> <th>Data Size</th> <th>ExecuteTime(ms)</th> </tr> </thead> <tbody> <tr> <td>100</td> <td>102</td> </tr> <tr> <td>200</td> <td>293</td> </tr> <tr> <td>500</td> <td>488</td> </tr> <tr> <td>1000</td> <td>723</td> </tr> <tr> <td>10000</td> <td>1867</td> </tr> </tbody> </table> <p><strong>Performance Analysis</strong>:</p> <ul> <li>Shows a slight improvement in performance compared to <code class="language-plaintext highlighter-rouge">saveAll</code>.</li> <li>May encounter OutOfMemory issues due to persistent queries in memory.</li> <li>Execution time increases with larger data volumes.</li> </ul> <blockquote> <p><strong>But there may be OOM problems. The OOM is from executeUpdate method, the problem is, after createNativeQuery, the parser keep the query in manager memory, so better avoid use <code class="language-plaintext highlighter-rouge">EntityManager</code></strong></p> </blockquote> <h3 id="3-method-3-jdbc-batch-update-using-preparedstatement">3. Method 3: JDBC Batch Update Using <code class="language-plaintext highlighter-rouge">PreparedStatement</code></h3> <p><strong>Pseudo code</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">String</span> <span class="nf">patchData</span><span class="o">(</span><span class="nc">String</span> <span class="n">cursor</span><span class="o">){</span>
  <span class="n">connect</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
  <span class="n">connection</span><span class="o">.</span><span class="na">setAutoCommit</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
  
  <span class="n">log</span><span class="o">(</span><span class="s">"patch data Start"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="c1">// loop to get data one by one</span>
  <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
    <span class="n">num</span><span class="o">++;</span>
    
    <span class="nc">PatchData</span> <span class="n">patchData</span> <span class="o">=</span> <span class="n">patchDataService</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="n">cursor</span><span class="o">);</span>
    <span class="c1">// if list is null, then exit the loop</span>
    <span class="k">if</span><span class="o">(</span><span class="n">patchData</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">!</span><span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span>			<span class="o">{</span>
				<span class="c1">//get new cursor</span>
      	<span class="n">cursor</span> <span class="o">=</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getCursor</span><span class="o">();</span>
      	
      	<span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO DATA (ID, NAME, DATE) VALUES (?, ?, now())"</span>
        
        <span class="k">try</span><span class="o">(</span><span class="nc">PreparedStatement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">)){</span>
          <span class="kt">int</span> <span class="n">batchSize</span> <span class="o">=</span> <span class="mi">5000</span><span class="o">;</span>
          <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="k">for</span><span class="o">(</span><span class="nc">PatchData</span> <span class="nl">data:</span> <span class="n">patchData</span><span class="o">.</span><span class="na">getDataList</span><span class="o">()){</span>
            <span class="n">statement</span><span class="o">.</span><span class="na">setBytes</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
            <span class="n">statement</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">data</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
            <span class="n">statement</span><span class="o">.</span><span class="na">addBatch</span><span class="o">();</span>
            
            <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">batchSize</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
              <span class="n">statement</span><span class="o">.</span><span class="na">executeBatch</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">i</span><span class="o">++;</span>
          <span class="o">}</span>
          <span class="c1">// execute the remaining queries</span>
          <span class="n">statement</span><span class="o">.</span><span class="na">executeBatch</span><span class="o">();</span>
          <span class="n">connection</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
        <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exection</span> <span class="n">ex</span><span class="o">){</span>
          <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"error: {}"</span><span class="o">,</span> <span class="n">ex</span><span class="o">.</span><span class="na">message</span><span class="o">());</span>
          <span class="n">connection</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span>
          <span class="n">connection</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
      	<span class="n">log</span><span class="o">(</span><span class="s">"patch data: {} times"</span><span class="o">,</span> <span class="n">num</span><span class="o">);</span>
    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
      <span class="n">log</span><span class="o">(</span><span class="s">"patch data End"</span><span class="o">);</span>
      
      <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Performance Analysis</strong>:</p> <ul> <li>Significantly improved performance when handling large data volumes.</li> <li>Batch processing effectively reduces communication overhead.</li> <li>Reduces the number of parsing and optimization operations per migration.</li> </ul> <blockquote> <p><strong>PS:</strong> Add <strong>?rewriteBatchedStatements=true</strong> to the end of your JDBC url.</p> <p><strong>Eg : <em>jdbc:mysql://server:3306/db_name?rewriteBatchedStatements=true</em></strong></p> <p><code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> is a configuration parameter for MySQL database connections that enables rewriting of a similar set of SQL statements, merging them into a larger SQL statement, and then executing it at once. This can reduce the overhead of communication, parsing, optimization and transaction management, and improve the efficiency of operations such as bulk data insertion.</p> </blockquote> <h4 id="explanation-of-rewritebatchedstatements">Explanation of RewriteBatchedStatements:</h4> <p><code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> is a configuration parameter for MySQL database connections that enables rewriting a set of similar SQL statements, merging them into a larger SQL statement, and then executing it at once. This configuration parameter is recommended for use in JDBC batch updates, and its significance is reflected in several aspects:</p> <p>1.<strong>Reduced Communication Overhead:</strong></p> <ul> <li>Every execution of an SQL statement in a database connection involves communication. Using <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> helps merge multiple SQL statements, reducing frequent communication overhead and improving data transfer efficiency.</li> </ul> <p>2.<strong>Reduced Parsing and Optimization Counts:</strong></p> <ul> <li>Databases need to parse and optimize SQL statements before execution. Batch updates reduce the count of parsing and optimization since a group of similar SQL statements is merged into one, requiring the database to perform parsing and optimization only once.</li> </ul> <p>3.<strong>Efficiency in Transaction Management:</strong></p> <ul> <li>Batch updates often occur within a single transaction. Enabling <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> reduces the frequency of transaction starts and commits, enhancing the efficiency of transaction management, especially in scenarios involving large-scale data insertion or updates.</li> </ul> <p>4.<strong>Performance Optimization:</strong></p> <ul> <li>Batch updates efficiently leverage the database’s bulk processing capabilities. For inserting or updating a significant amount of data, batch updates generally offer better performance compared to the execution of individual SQL statements.</li> </ul> <p>5.<strong>Adaptation to Application Scenarios:</strong></p> <ul> <li>In some cases, not enabling <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> may result in the JDBC driver executing batch updates using multiple separate SQL statements, compromising performance. Enabling this configuration parameter ensures that the JDBC driver optimizes batch updates into a more efficient single SQL statement.</li> </ul> <p>In practical applications, enabling <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> can be an effective performance optimization strategy, particularly in scenarios involving large-scale data operations.</p> <table> <thead> <tr> <th>Data Size</th> <th>ExecuteTime(ms)</th> </tr> </thead> <tbody> <tr> <td>100</td> <td>92</td> </tr> <tr> <td>200</td> <td>113</td> </tr> <tr> <td>500</td> <td>248</td> </tr> <tr> <td>1000</td> <td>602</td> </tr> <tr> <td>10000</td> <td>997</td> </tr> </tbody> </table> <h2 id="optimal-solutions-and-recommendations">Optimal Solutions and Recommendations:</h2> <p>In conclusion, the presented article explored various strategies for handling large-scale data migrations from SQL Server to MySQL using Java APIs. Each method was analyzed based on its performance, efficiency, and suitability for different scenarios. Here are the key takeaways:</p> <h3 id="1-using-saveall-with-jpa">1. <strong>Using <code class="language-plaintext highlighter-rouge">saveAll</code> with JPA:</strong></h3> <ul> <li>Suitable for moderate data sizes.</li> <li>Performance degrades significantly as the dataset grows.</li> <li>Prone to potential OutOfMemory errors with very large datasets. <h3 id="2-using-entitymanager">2. <strong>Using <code class="language-plaintext highlighter-rouge">EntityManager</code>:</strong></h3> </li> <li>Provides a slight improvement in performance compared to <code class="language-plaintext highlighter-rouge">saveAll</code>.</li> <li>May encounter OutOfMemory issues due to the persistence of queries in memory.</li> <li>Execution time increases as the dataset grows. <h3 id="3-jdbc-batch-update-with-preparedstatement">3. <strong>JDBC Batch Update with <code class="language-plaintext highlighter-rouge">PreparedStatement</code>:</strong></h3> </li> <li>Demonstrates significantly improved performance.</li> <li>Utilizes batch processing to efficiently handle large datasets.</li> <li>Minimizes communication overhead, parsing, and optimization counts.</li> <li>Requires careful handling of JDBC resources to avoid potential issues. <h3 id="4-importance-of-rewritebatchedstatements">4. <strong>Importance of <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code>:</strong></h3> </li> <li>Enables the rewriting of similar SQL statements into a single, efficient statement.</li> <li>Reduces communication overhead, parsing, and optimization counts.</li> <li>Highly recommended for optimizing JDBC batch updates.</li> </ul> <p>Considering the findings, the optimal solution depends on the specific requirements and the size of the dataset:</p> <ul> <li>For small to moderate datasets, <code class="language-plaintext highlighter-rouge">saveAll</code> with JPA or <code class="language-plaintext highlighter-rouge">EntityManager</code> may suffice.</li> <li>For large-scale data migrations, especially when dealing with millions of records, the JDBC Batch Update approach with <code class="language-plaintext highlighter-rouge">PreparedStatement</code> is highly recommended.</li> <li>Enabling <code class="language-plaintext highlighter-rouge">RewriteBatchedStatements</code> further enhances the efficiency of JDBC batch updates, especially in scenarios where performance is critical.</li> </ul> <p>By understanding the strengths and weaknesses of each approach, readers can make informed decisions based on their project requirements and performance considerations.</p>]]></content><author><name></name></author><category term="Work"/><summary type="html"><![CDATA[Optimizing Large-scale Data Migration from SQL Server to MySQL with JDBC]]></summary></entry><entry><title type="html">SORT</title><link href="https://zhengstar94.github.io//blog/2023/SORT/" rel="alternate" type="text/html" title="SORT"/><published>2023-09-30T00:00:00+00:00</published><updated>2023-09-30T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/SORT</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/SORT/"><![CDATA[<h1 id="sort">SORT</h1> <h2 id="approaches-and-complexities-of-3-sorting-algorithms">Approaches and Complexities of 3 Sorting Algorithms</h2> <h3 id="selection-sort">Selection Sort</h3> <p>1.Algorithmic Approach of Selection Sort<br/></p> <p>In selection sort, we choose the smallest element from the unsorted sub-array and append it to the end of the sorted sub-array. We repeat this process until all elements are sorted.<br/></p> <p>2.Time and Space Complexity of Selection Sort<br/></p> <p>Selection sort has a time complexity of O(n^2), which makes it inefficient for sorting large datasets. However, its space complexity is small, only O(1), making it suitable for cases where memory is limited.<br/></p> <h3 id="bubble-sort">Bubble Sort</h3> <p>1.Algorithmic Approach of Bubble Sort<br/></p> <p>Bubble sort compares adjacent elements in the unsorted sub-array and swaps them if the first element is greater than the second element. We repeat this process until all elements are sorted.</p> <p>2.Time and Space Complexity of Bubble Sort<br/></p> <p>Bubble sort also has a time complexity of O(n^2), but if the sequence is already sorted, bubble sort can finish early and have a time complexity of O(n).</p> <h3 id="insertion-sort">Insertion Sort</h3> <p>1.Algorithmic Approach of Insertion Sort<br/></p> <p>Insertion sort divides the unsorted array into sorted and unsorted sub-arrays. We take each element from the unsorted sub-array and insert it into the correct position in the sorted sub-array. We repeat this process until all elements are sorted.</p> <p>2.Time and Space Complexity of Insertion Sort<br/></p> <p>Insertion sort has a time complexity of O(n^2), but if the sequence is already sorted or mostly sorted, the efficiency of insertion sort is higher than that of selection sort or bubble sort. Furthermore, its space complexity is also small, only O(1).</p> <h2 id="practical-operations-of-three-sorting-algorithms">Practical Operations of Three Sorting Algorithms</h2> <blockquote> <p>Take the array [3, 5, 1, 4, 2] as an example.</p> </blockquote> <h3 id="selection-sort-1">Selection Sort</h3> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/09/30/SelectionSort-480.webp 480w,/assets/img/2023/09/30/SelectionSort-800.webp 800w,/assets/img/2023/09/30/SelectionSort-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/09/30/SelectionSort.gif" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ol> <li>In the first round of sorting, find the smallest element 1 and put it in the first position. The array of elements at this time is [1, 5, 3, 4, 2].</li> <li>In the second round of sorting, find the smallest element 2 in the unsorted array and put it at the end of the sorted array. The array of elements at this time is [1, 2, 3, 4, 5].</li> </ol> <h3 id="bubble-sort-1">Bubble Sort</h3> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/09/30/BubbleSort-480.webp 480w,/assets/img/2023/09/30/BubbleSort-800.webp 800w,/assets/img/2023/09/30/BubbleSort-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/09/30/BubbleSort.gif" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ol> <li>First pass: Compare adjacent elements 3 and 5, find that 3 is smaller than 5, so no swap is made. The array now is [3, 5, 1, 4, 2]. Then compare 5 and 1, find that 5 is larger than 1, swap their positions, and the array now is [3, 1, 5, 4, 2]. Next, compare 5 and 4, find that 5 is larger than 4, swap their positions, and the array now is [3, 1, 4, 5, 2]. Finally, compare 5 and 2, find that 5 is larger than 2, swap their positions, and the array now is [3, 1, 4, 2, 5].</li> <li>Second pass: Compare adjacent elements 3 and 1, find that 3 is larger than 1, swap their positions, and the array now is [1, 3, 4, 2, 5]. Then compare 4 and 2, find that 4 is larger than 2, swap their positions, and the array now is [1, 3, 2, 4, 5].</li> <li>Third pass: Compare adjacent elements 1 and 3, find that 1 is smaller than 3, so no swap is made. The array now is [1, 3, 2, 4, 5]. Then compare 3 and 2, find that 3 is larger than 2, swap their positions, and the array now is [1, 2, 3, 4, 5].</li> </ol> <h3 id="insertion-sort-1">Insertion Sort</h3> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/09/30/InsertionSort-480.webp 480w,/assets/img/2023/09/30/InsertionSort-800.webp 800w,/assets/img/2023/09/30/InsertionSort-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/09/30/InsertionSort.gif" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ol> <li> <table> <tbody> <tr> <td>First round of sorting: The sorted part only contains one element, which is 3. The unsorted part includes [5, 1, 4, 2]. [3]</td> <td>5 1 4 2;</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>Second round of sorting: Take the first element 5 from the unsorted part and compare it with the elements in the sorted part. We find that 5 is greater than 3, so we insert it after 3 in the sorted part. Now the sorted part is [3, 5] and the unsorted part is [1, 4, 2]. [3 5]</td> <td>1 4 2;</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>Third round of sorting: Take the first element 1 from the unsorted part and insert it into the sorted part. First, compare it with the last element 5 in the sorted part. We find that 1 is smaller than 5, so we insert it before 5. Then compare it with the first element 3 in the sorted part. We find that 1 is smaller than 3, so we insert it before 3. Now the sorted part is [1, 3, 5] and the unsorted part is [4, 2]. [1 3 5]</td> <td>4 2;</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>Fourth round of sorting: Take the first element 4 from the unsorted part and insert it into the sorted part. First, compare it with the last element 5 in the sorted part. We find that 4 is smaller than 5, so we insert it before 5. Then compare it with the second element 3 in the sorted part. We find that 4 is greater than 3, so we insert it after 3. Now the sorted part is [1, 3, 4, 5] and the unsorted part is [2]. [1 3 4 5]</td> <td>2;</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>Fifth round of sorting: Insert the first element 2 from the unsorted part into the sorted part. Since 2 is smaller than 5, we insert it before 5. At the same time, 2 is also smaller than 3, so we insert it before 3. Finally, 2 is also smaller than 4, so we insert it before 4. Now the sorted part becomes [1, 2, 3, 4, 5] and the unsorted part is empty. [1 2 3 4 5]</td> <td>.</td> </tr> </tbody> </table> </li> </ol>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[SORT]]></summary></entry><entry><title type="html">Levenshtein Distance Algorithm</title><link href="https://zhengstar94.github.io//blog/2023/LevenshteinDistanceAlgorithm/" rel="alternate" type="text/html" title="Levenshtein Distance Algorithm"/><published>2023-09-02T00:00:00+00:00</published><updated>2023-09-02T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/LevenshteinDistanceAlgorithm</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/LevenshteinDistanceAlgorithm/"><![CDATA[<h1 id="levenshtein-distance-algorithm">Levenshtein Distance Algorithm</h1> <p>Levenshtein Distance, also known as edit distance, is used to measure the difference between two strings. By taking the minimum number of steps to convert one string to another, this step number represents the “distance” between the two strings. Specifically, steps can be inserting a new character, deleting an existing character, or replacing a character.</p> <h2 id="algorithm-description">Algorithm description</h2> <p>The core of the edit distance algorithm is the dynamic programming algorithm, with detailed steps as follows:</p> <ol> <li>We use a two-dimensional array <code class="language-plaintext highlighter-rouge">dp[i][j]</code> to represent the shortest edit distance from string s of length i to string t of length j.</li> <li>When <code class="language-plaintext highlighter-rouge">i=0</code>, it means s is an empty string, so it needs to insert j characters to change to t, so <code class="language-plaintext highlighter-rouge">dp[i][j] = j</code>.</li> <li>When <code class="language-plaintext highlighter-rouge">j=0</code>, it means t is an empty string, so it needs to delete i characters to change from s to t, so <code class="language-plaintext highlighter-rouge">dp[i][j] = i</code>.</li> <li>When <code class="language-plaintext highlighter-rouge">i!=0</code> and <code class="language-plaintext highlighter-rouge">j!=0</code>, we need to consider whether <code class="language-plaintext highlighter-rouge">s[i-1]</code> and <code class="language-plaintext highlighter-rouge">t[j-1]</code> are equal, if they are equal, then <code class="language-plaintext highlighter-rouge">dp[i][j] = dp[i-1][j-1]</code>; if they are not equal, then we need to consider the minimum of the following three situations:</li> <li>Replace <code class="language-plaintext highlighter-rouge">s[i-1]</code>, that is, let <code class="language-plaintext highlighter-rouge">s[i-1]</code> become <code class="language-plaintext highlighter-rouge">t[j-1]</code>, so <code class="language-plaintext highlighter-rouge">dp[i][j] = 1 + dp[i-1][j-1]</code>.</li> <li>Delete <code class="language-plaintext highlighter-rouge">s[i-1]</code>, let <code class="language-plaintext highlighter-rouge">s[0...i-2]</code> become <code class="language-plaintext highlighter-rouge">t[0...j-1]</code>, that is, <code class="language-plaintext highlighter-rouge">dp[i][j] = 1 + dp[i-1][j]</code>.</li> <li>Insert <code class="language-plaintext highlighter-rouge">t[j-1]</code> into s, let <code class="language-plaintext highlighter-rouge">s[0...i-1]</code> become <code class="language-plaintext highlighter-rouge">t[0...j-2]</code>, that is, <code class="language-plaintext highlighter-rouge">dp[i][j] = 1 + dp[i][j-1]</code>.</li> </ol> <h2 id="algorithm-implementation-1">Algorithm Implementation 1</h2> <p>Below is a Java implementation of the Levenshtein Distance algorithm:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**【O(nm)time∣O(nm)space】**/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LevenshteinDistance</span> <span class="o">{</span>
    <span class="c1">// Define the method for calculating the Levenshtein distance between two strings</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">levenshteinDistance</span><span class="o">(</span><span class="nc">String</span> <span class="n">str1</span><span class="o">,</span> <span class="nc">String</span> <span class="n">str2</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Create a matrix dp where dp[i][j] represents the Levenshtein distance between the first i characters of str1 and the first j characters of str2</span>
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>

        <span class="c1">// Iterate over the strings</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>

                <span class="c1">// When i is 0, meaning that the first string is empty, the distance is j, which is the length of the second string</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
                <span class="o">}</span> 

                <span class="c1">// When j is 0, meaning that the second string is empty, the distance is i, which is the length of the first string</span>
                <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
                <span class="o">}</span> 

                <span class="c1">// When the characters are the same, the distance doesn't change</span>
                <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">str1</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="n">str2</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">dp</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
                <span class="o">}</span>

                <span class="c1">// When the characters are different, the distance increases by 1 and it becomes the minimum value of the three neighboring cells plus one</span>
                <span class="k">else</span> <span class="o">{</span>
                    <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">],</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">],</span> <span class="n">dp</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">]))</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// The last cell of the matrix dp is the Levenshtein distance between the two strings</span>
        <span class="k">return</span> <span class="n">dp</span><span class="o">[</span><span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()][</span><span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="detailed-explanation-1">Detailed Explanation 1</h3> <p>First, we construct a two-dimensional array dp where dp[i][j] represents the Levenshtein Distance between the first i characters of string str1 and the first j characters of string str2.</p> <p>Then, we traverse the two-dimensional array through a double loop and calculate the value of dp[i][j]. The value of dp[i][j] may have the following situations:</p> <ol> <li>If str1 or str2 is an empty string (length is 0), then dp[i][j] is the length of the other string because we need at least i or j insert operations to match the two strings.</li> <li>If the i-th character of str1 and the j-th character of str2 are the same, then dp[i][j] is dp[i-1][j-1], because we do not need any additional operations from str1 to str2.</li> <li>If the i-th character of str1 and the j-th character of str2 are different, then dp[i][j] is the minimum value plus 1 before dp[i-1][j-1] (replacement operation), dp[i][j-1] (insert operation) and dp[i-1][j] (delete operation).</li> </ol> <p>Finally, return dp[str1.length][str2.length] as the result, which represents the minimum number of operations required to fully convert string str1 to string str2.</p> <h2 id="algorithm-implementation-2">Algorithm Implementation 2</h2> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**【O(nm)time∣O(min(n,m))space】 **/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LevenshteinDistance</span> <span class="o">{</span>
    <span class="c1">// Method for calculating Levenshtein Distance</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">levenshteinDistance</span><span class="o">(</span><span class="nc">String</span> <span class="n">str1</span><span class="o">,</span> <span class="nc">String</span> <span class="n">str2</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Identify which string is smaller and which is bigger</span>
        <span class="nc">String</span> <span class="n">small</span> <span class="o">=</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">str1</span> <span class="o">:</span> <span class="n">str2</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">big</span> <span class="o">=</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">str1</span> <span class="o">:</span> <span class="n">str2</span><span class="o">;</span>

        <span class="c1">// Create two arrays to keep track of the current and previous edit distances</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">evenEdits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">oddEdits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>

        <span class="c1">// Initialize the first row in evenEdits array</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">evenEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// Variables to reference the current and previous edit distances</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">currentEdits</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">previousEdits</span><span class="o">;</span>

        <span class="c1">// Loop over characters in the big string</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">big</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">// Determine whether the current row is even or odd</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">currentEdits</span> <span class="o">=</span> <span class="n">oddEdits</span><span class="o">;</span>
                <span class="n">previousEdits</span> <span class="o">=</span> <span class="n">evenEdits</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">currentEdits</span> <span class="o">=</span> <span class="n">evenEdits</span><span class="o">;</span>
                <span class="n">previousEdits</span> <span class="o">=</span> <span class="n">oddEdits</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">// The first cell of the current row is just the row number i</span>
            <span class="n">currentEdits</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>

            <span class="c1">// Loop over the characters in the small string</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="c1">// If the characters in the current cell are the same</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">big</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="n">small</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c1">// The edit distance is simply the diagonal</span>
                    <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="c1">// The edit distance is the smallest of three options:</span>
                    <span class="c1">// insertion, deletion, and substitution</span>
                    <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">],</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span><span class="o">],</span> <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// Return the last cell from the most recent computed row</span>
        <span class="k">return</span> <span class="n">big</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">evenEdits</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()]</span> <span class="o">:</span> <span class="n">oddEdits</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="detailed-explanation-2">Detailed Explanation 2</h3> <p>While the optimized code may seem complex, its underlying concept is still dynamic programming, building the solution step by step to get the final answer, only making adjustments in the details to reduce space consumption.</p> <h4 id="1-determine-smaller-and-larger-strings"><strong>1. Determine Smaller and Larger Strings</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">small</span> <span class="o">=</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">str1</span> <span class="o">:</span> <span class="n">str2</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">big</span> <span class="o">=</span> <span class="n">str1</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">str2</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">?</span> <span class="n">str1</span> <span class="o">:</span> <span class="n">str2</span><span class="o">;</span>
</code></pre></div></div> <h4 id="2-create-two-arrays-evenedits-and-oddedits"><strong>2. Create Two Arrays evenEdits and oddEdits</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span><span class="o">[]</span> <span class="n">evenEdits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">oddEdits</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
</code></pre></div></div> <p>evenEdits and oddEdits are used to store the edit distances of even and odd rows respectively. The size is related to the length of the smaller string. As we only care about the edit distance of the previous row and the current row, two arrays are used to save space.</p> <h4 id="3-initialise-evenedits-array"><strong>3. Initialise evenEdits Array</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
    <span class="n">evenEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="4-start-double-loops"><strong>4. Start Double Loops</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">big</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>For each row (each character of big in this case), we calculate the edit distance between it and each character of small. When i is even, we use evenEdits array to store the result; when i is odd, we use oddEdits array.</p> <h4 id="5-calculate-edit-distance"><strong>5. Calculate Edit Distance</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">big</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="n">small</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">],</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">previousEdits</span><span class="o">[</span><span class="n">j</span><span class="o">],</span> <span class="n">currentEdits</span><span class="o">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]));</span>
<span class="o">}</span>
</code></pre></div></div> <p>Here we decide whether to keep the value of previousEdits[j - 1] (value of the diagonal) or to set it to 1 + the previous minimum edit distance, based on whether the current character of big and small are equal. The smaller value comes from one of three sources: previousEdits[j - 1] (represents replacement operation), previousEdits[j] (represents delete operation), or currentEdits[j - 1] (represents insert operation).</p> <h4 id="6-return-result"><strong>6. Return Result</strong></h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="n">big</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">evenEdits</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()]</span> <span class="o">:</span> <span class="n">oddEdits</span><span class="o">[</span><span class="n">small</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
</code></pre></div></div> <p>Finally, the edit distance is in the last element of the last row. Depending on whether the length of big is odd or even, we decide to return evenEdits[small.length()] or oddEdits[small.length()]).</p> <p>In this way, we optimized the original space complexity from O(m*n) to O(min(m,n)).</p> <h2 id="algorithm-application">Algorithm Application</h2> <p>The Levenshtein Distance is widely used in natural language processing and data processing, including word spelling checking, speech recognition, fuzzy string queries, and bioinformatics (such as DNA string matching).</p> <p>Above is a detailed explanation and implementation of the Levenshtein Distance algorithm. I hope this helps you understand it. Although this algorithm is concise, it is very practical. The ideas of dynamic programming and space optimization techniques in the evolution process are the important reasons for the algorithm’s classic status and are worth pondering.</p>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[Levenshtein Distance Algorithm]]></summary></entry><entry><title type="html">Mastering Coin Change with Dynamic Programming</title><link href="https://zhengstar94.github.io//blog/2023/MasteringCoinChangeWithDynamicProgramming/" rel="alternate" type="text/html" title="Mastering Coin Change with Dynamic Programming"/><published>2023-09-01T00:00:00+00:00</published><updated>2023-09-01T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/MasteringCoinChangeWithDynamicProgramming</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/MasteringCoinChangeWithDynamicProgramming/"><![CDATA[<h1 id="mastering-coin-change-with-dynamic-programming">Mastering Coin Change with Dynamic Programming</h1> <p>This post will demonstrate the application of dynamic programming in solving change making problems. We will mainly discuss two aspects: finding out all combinations of coins that makeup a specific amount of money, and finding the minimum number of coins required to make up a specific amount of money. This technique is ideal for solving complex problems that need to be optimized.</p> <h2 id="i-finding-out-all-combinations-of-coins-to-make-up-a-specific-amount">I. Finding Out All Combinations of Coins to Make Up a Specific Amount</h2> <p>The first problem we present is: suppose we have several different denominations of coins, we want to find out how many different ways we can make up a specific amount of money. This is a common problem in number theory and computer science and is applicable to many daily life scenarios, for instance, when you need to pay a certain amount of money, you would want to know how many ways that money can be paid.</p> <p>We can use the following Java code for such scenarios:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">change</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">coins</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Initialize the dynamic programing array.</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
    
    <span class="c1">// There's only one way to make up the amount of 0, which is using 0 coins.</span>
    <span class="n">dp</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> 
    
    <span class="c1">// Iterating over the denomination of coins provided.</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">coin</span> <span class="o">:</span> <span class="n">coins</span><span class="o">)</span> <span class="o">{</span>
        
        <span class="c1">// For each denomination, update the number of ways the amount can be made up.</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">coin</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="o">++</span><span class="n">x</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">dp</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="o">[</span><span class="n">x</span> <span class="o">-</span> <span class="n">coin</span><span class="o">];</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="c1">// Return the number of ways to make up the amount using the provided denominations.</span>
    <span class="k">return</span> <span class="n">dp</span><span class="o">[</span><span class="n">amount</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></div></div> <p>The time complexity of this code is O(N*amount), where N is the number of coin denominations and <code class="language-plaintext highlighter-rouge">amount</code> is the target amount. The space complexity is O(amount), regardless of the number of coin types, only ‘amount’ states are needed to store all the necessary amounts.</p> <h2 id="ii-finding-out-the-minimum-number-of-coins-to-make-up-a-specific-amount">II. Finding Out the Minimum Number of Coins to Make Up a Specific Amount</h2> <p>The second problem is: How to make up a specific amount with the least number of coins. This is also a common problem in daily life. For example, when we go to shop at a supermarket, we want to pay a certain amount of money with the least number of coins. In this case, we need to consider how to choose coins.</p> <p>For this problem, we can use the following Java code:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">coinChange</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">coins</span><span class="o">,</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Initialize the maximum value.</span>
    <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>  
    
    <span class="c1">// Initialize the dynamic programing array, with all values set to max.</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
    <span class="nc">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">dp</span><span class="o">,</span> <span class="n">max</span><span class="o">);</span>
    
    <span class="c1">// Base case where the amount 0 can be achieved with no coins.</span>
    <span class="n">dp</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    
    <span class="c1">// Iterating over all amounts from 1 to the target amount.</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">amount</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        
        <span class="c1">// For each denomination of the coin.</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">coins</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
            
            <span class="c1">// If the denomination of the coin is not larger than the current amount.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">coins</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
                
                <span class="c1">// Try to make up the current amount with fewer coins.</span>
                <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">dp</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">coins</span><span class="o">[</span><span class="n">j</span><span class="o">]]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="c1">// The final value of dp[amount] is the minimum number of coins needed to make up the amount.</span>
    <span class="k">return</span> <span class="n">dp</span><span class="o">[</span><span class="n">amount</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">amount</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">dp</span><span class="o">[</span><span class="n">amount</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></div></div> <p>The time complexity of this code is also O(N*amount), where N is the number of coin denominations, and ‘amount’ is the payment amount. The space complexity also equals O(amount), regardless of the number of coin types, only ‘amount’ states are needed to store all the necessary amounts.</p> <p>In conclusion, these two problems are classic applications of the dynamic programming method. By constantly trying new possibilities, breaking down the problem into smaller subproblems, and saving the answers to these subproblems, we can avoid repeated computations. This concludes the graceful solution to change making problems via dynamic programming.</p>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[Mastering Coin Change with Dynamic Programming]]></summary></entry><entry><title type="html">Union-Find</title><link href="https://zhengstar94.github.io//blog/2023/Union-Find/" rel="alternate" type="text/html" title="Union-Find"/><published>2023-08-30T00:00:00+00:00</published><updated>2023-08-30T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/Union-Find</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/Union-Find/"><![CDATA[<h1 id="in-depth-understanding-of-implementation-and-optimization-in-union-find">In-Depth Understanding of Implementation and Optimization in Union-Find</h1> <h2 id="introduction">Introduction</h2> <p>Union-Find is a powerful tool for solving problems related to set merging, querying, and connectivity. This article delves into the implementation and optimization of Union-Find, using the example code <code class="language-plaintext highlighter-rouge">UnionFind4</code> to illustrate its principles and applications.</p> <h2 id="1-data-structure-and-initialization">1. Data Structure and Initialization</h2> <h3 id="a-data-structure">a. Data Structure</h3> <p>The <code class="language-plaintext highlighter-rouge">UnionFind4</code> class includes two crucial arrays: <code class="language-plaintext highlighter-rouge">root</code> for storing information about the root nodes of sets, and <code class="language-plaintext highlighter-rouge">rank</code> for recording the rank of each set.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UnionFind</span> <span class="o">{</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">root</span><span class="o">;</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">rank</span><span class="o">;</span>

    <span class="c1">// Constructor, initializes the Union-Find</span>
    <span class="kd">public</span> <span class="nf">UnionFind</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="n">a</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">root</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">rank</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="2-find-operationdetailed-explanation-of-find-operation">2. <code class="language-plaintext highlighter-rouge">find</code> Operation(Detailed Explanation of <code class="language-plaintext highlighter-rouge">find</code> Operation)</h2> <p>In the Union-Find data structure, the purpose of the <code class="language-plaintext highlighter-rouge">find</code> operation is to locate the root node of the set to which an element belongs. Specifically, the <code class="language-plaintext highlighter-rouge">find</code> operation employs the technique of path compression to enhance its search performance.</p> <h3 id="a-path-compression">a. Path Compression</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">find</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">])</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">]);</span>
<span class="o">}</span>
</code></pre></div></div> <p>In the <code class="language-plaintext highlighter-rouge">find</code> operation, we first check whether the current element <code class="language-plaintext highlighter-rouge">x</code> is the root node of the set, i.e., <code class="language-plaintext highlighter-rouge">x == root[x]</code>. If <code class="language-plaintext highlighter-rouge">x</code> is the root node, we directly return <code class="language-plaintext highlighter-rouge">x</code>. Otherwise, we recursively call <code class="language-plaintext highlighter-rouge">find(root[x])</code> to find the root node. During the recursive return process, we update the parent nodes of all traversed nodes to the root node. This is the core idea of path compression, which shortens the height of the tree by connecting nodes directly to the root, improving subsequent search efficiency.</p> <h2 id="3-union-operationdetailed-explanation-of-union-operation">3. <code class="language-plaintext highlighter-rouge">union</code> Operation(Detailed Explanation of <code class="language-plaintext highlighter-rouge">union</code> Operation)</h2> <p>In the Union-Find data structure, the <code class="language-plaintext highlighter-rouge">union</code> operation is used to merge two sets. Here, the strategy of union by rank is employed to maintain tree balance and improve overall performance.</p> <h3 id="a-union-by-rank">a. Union by Rank</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">union</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">rootX</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rootY</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">rootX</span> <span class="o">!=</span> <span class="n">rootY</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="o">[</span><span class="n">rootY</span><span class="o">])</span> <span class="o">{</span>
            <span class="n">root</span><span class="o">[</span><span class="n">rootY</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootX</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">rank</span><span class="o">[</span><span class="n">rootY</span><span class="o">])</span> <span class="o">{</span>
            <span class="n">root</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootY</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">root</span><span class="o">[</span><span class="n">rootY</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootX</span><span class="o">;</span>
            <span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div> <p>In the <code class="language-plaintext highlighter-rouge">union</code> operation, we first use the <code class="language-plaintext highlighter-rouge">find</code> operation to find the root nodes <code class="language-plaintext highlighter-rouge">rootX</code> and <code class="language-plaintext highlighter-rouge">rootY</code> of the sets containing elements <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>, respectively. Next, we compare the ranks of the two root nodes.</p> <ul> <li>If <code class="language-plaintext highlighter-rouge">rank[rootX] &gt; rank[rootY]</code>, it indicates that the root node <code class="language-plaintext highlighter-rouge">rootX</code> has a higher rank. Therefore, we update the parent node of <code class="language-plaintext highlighter-rouge">rootY</code> to be <code class="language-plaintext highlighter-rouge">rootX</code>.</li> <li>If <code class="language-plaintext highlighter-rouge">rank[rootX] &lt; rank[rootY]</code>, the opposite occurs, and we update the parent node of <code class="language-plaintext highlighter-rouge">rootX</code> to be <code class="language-plaintext highlighter-rouge">rootY</code>.</li> <li>If the ranks of both root nodes are equal, we choose one as the new root node and increment its rank by 1.</li> </ul> <p>This union by rank strategy effectively maintains the balance of the tree, preventing excessive tree depth and enhancing overall performance.</p> <h2 id="4-complete-example">4. Complete Example</h2> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Complete UnionFind4 class</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UnionFind</span> <span class="o">{</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">root</span><span class="o">;</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">rank</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UnionFind</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">root</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">rank</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">find</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">])</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">]</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">root</span><span class="o">[</span><span class="n">x</span><span class="o">]);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">union</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">rootX</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">rootY</span> <span class="o">=</span> <span class="n">find</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">rootX</span> <span class="o">!=</span> <span class="n">rootY</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="o">[</span><span class="n">rootY</span><span class="o">])</span> <span class="o">{</span>
                <span class="n">root</span><span class="o">[</span><span class="n">rootY</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootX</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">rank</span><span class="o">[</span><span class="n">rootY</span><span class="o">])</span> <span class="o">{</span>
                <span class="n">root</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootY</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">root</span><span class="o">[</span><span class="n">rootY</span><span class="o">]</span> <span class="o">=</span> <span class="n">rootX</span><span class="o">;</span>
                <span class="n">rank</span><span class="o">[</span><span class="n">rootX</span><span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="5-optimization-strategies">5. Optimization Strategies</h2> <h3 id="a-union-by-rank-1">a. Union by Rank</h3> <p>Union by rank is an optimization strategy that maintains tree balance for improved overall performance.</p> <h3 id="b-path-compression">b. Path Compression</h3> <p>Path compression shortens the height of the tree by directly connecting nodes to the root, further enhancing search performance.</p> <h2 id="6-example-application">6. Example Application</h2> <p>Union-Find finds widespread application in solving problems related to minimum spanning trees, connectivity, and more. Below is a simple example scenario:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example application</span>
<span class="nc">UnionFind</span> <span class="n">uf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UnionFind</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
<span class="n">uf</span><span class="o">.</span><span class="na">union</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
<span class="n">uf</span><span class="o">.</span><span class="na">union</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">uf</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="n">uf</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>  <span class="c1">// Output: true, indicating that 0 and 2 belong to the same set</span>
</code></pre></div></div> <h2 id="7-common-algorithms-using-union-find">7. Common Algorithms Using Union-Find</h2> <p>Union-Find is a versatile data structure used in various algorithms for efficient set merging and connectivity handling. Some common algorithms where Union-Find is commonly employed include:</p> <h3 id="a-kruskals-algorithm-for-minimum-spanning-tree">a. <strong>Kruskal’s Algorithm for Minimum Spanning Tree</strong></h3> <ul> <li>Kruskal’s algorithm uses Union-Find to efficiently determine whether adding an edge to the minimum spanning tree would create a cycle. If the vertices of the edge belong to the same set, adding the edge would create a cycle, and the edge is skipped.</li> </ul> <h3 id="b-connected-components-in-a-graph">b. <strong>Connected Components in a Graph</strong></h3> <ul> <li>Union-Find is widely used to identify connected components in an undirected graph. After processing all edges, the sets created by Union-Find represent the connected components of the graph.</li> </ul> <h3 id="c-dynamic-connectivity-in-percolation-problems">c. <strong>Dynamic Connectivity in Percolation Problems</strong></h3> <ul> <li>In percolation problems, where the goal is to study the connectivity in a system, Union-Find is employed to efficiently determine if the top and bottom of a system are connected.</li> </ul> <h3 id="d-image-segmentation">d. <strong>Image Segmentation</strong></h3> <ul> <li>Union-Find is used in image segmentation to efficiently identify and merge connected components in an image.</li> </ul> <h3 id="e-network-connectivity-problems">e. <strong>Network Connectivity Problems</strong></h3> <ul> <li>Union-Find is applied in various network connectivity problems, such as finding if two nodes in a network are connected or determining the connectivity status of a network.</li> </ul> <h3 id="f-job-scheduling-and-dependency-resolution">f. <strong>Job Scheduling and Dependency Resolution</strong></h3> <ul> <li>In scenarios where jobs have dependencies and need to be scheduled, Union-Find can be used to efficiently determine the dependencies and order of execution.</li> </ul> <p>These examples showcase the versatility of Union-Find in solving a diverse range of problems across different domains. Its ability to handle connectivity efficiently makes it a valuable tool in algorithm design.</p> <h2 id="conclusion">Conclusion</h2> <p>This article provides a detailed exploration of the implementation and optimization of Union-Find, using the <code class="language-plaintext highlighter-rouge">UnionFind4</code> example code to elucidate key concepts. Union-Find performs admirably in solving various set merging and querying problems. Through optimization strategies like union by rank and path compression, it achieves better real-world performance.</p>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[In-Depth Understanding of Implementation and Optimization in Union-Find]]></summary></entry><entry><title type="html">Prefix Sum</title><link href="https://zhengstar94.github.io//blog/2023/PrefixSum/" rel="alternate" type="text/html" title="Prefix Sum"/><published>2023-08-26T00:00:00+00:00</published><updated>2023-08-26T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/PrefixSum</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/PrefixSum/"><![CDATA[<h1 id="prefix-sum">Prefix Sum</h1> <h2 id="conception">Conception</h2> <blockquote> <p>Prefix sum is a technique commonly used in mathematics, algorithms, and other fields. It’s used to quickly calculate the prefix sum of an array’s elements, which is the sum of the elements from the first element to the current element. Prefix sum is a pre-processing that can enhance query efficiency and reduce time complexity during array processing.</p> </blockquote> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/26/1-480.webp 480w,/assets/img/2023/08/26/1-800.webp 800w,/assets/img/2023/08/26/1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/26/1.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><strong>So how do we get the sum of the ranges from nums [2] to nums [4]?</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
<span class="n">sums</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>
<span class="n">sums</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>

<span class="n">sums</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
<span class="c1">// nums [2] to nums [4]</span>
<span class="n">sums</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span> <span class="o">-</span> <span class="n">sums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">==</span> <span class="n">nums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
</code></pre></div></div> <h2 id="question">Question</h2> <ul> <li>You’re given a list of integers nums Write a function that returns a boolean representing whether there exists a zero-sum subarray of nums.</li> <li>A zero-sum subarray is any subarray where all of the values add up to zero. A subarray is any contiguous section of the array. For the purposes of this problem, a subarray can be as small as one element and as long as the original array.</li> </ul> <h2 id="solve">Solve</h2> <p>You can tell by the code.<br/> if we can find</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">-</span> <span class="n">sums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">,</span> <span class="n">then</span> <span class="n">sums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
</code></pre></div></div> <p>then return ‘true’</p> <p>so we can tell the nums=[-5,-5,2,3,5,7],sums=[-5,-10,-8,-5,0,7]</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sums</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span>  <span class="nl">then:</span>
</code></pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nums</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">+</span> <span class="n">nums</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</code></pre></div></div> <p>So we can get the second formula.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// i &lt; j</span>
<span class="k">if</span> <span class="n">sums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="n">sums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
<span class="n">then</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">,</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="n">sum</span> <span class="n">is</span> <span class="mi">0</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[Prefix Sum]]></summary></entry><entry><title type="html">Morris</title><link href="https://zhengstar94.github.io//blog/2023/Morris/" rel="alternate" type="text/html" title="Morris"/><published>2023-08-20T00:00:00+00:00</published><updated>2023-08-20T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/Morris</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/Morris/"><![CDATA[<h1 id="morris-traversal-of-binary-tree">Morris traversal of binary Tree</h1> <h2 id="conception">Conception</h2> <ol> <li>Nodes without left subtrees will only arrive once, and nodes with left subtrees will arrive twice.</li> <li>The use of the tree’s leaf nodes around the child is empty (a large number of free pointers of the tree), so as to achieve a rapid reduction in space overhead.</li> </ol> <h3 id="explain">Explain</h3> <blockquote> <p>The node uses the right pointer direction of the rightmost node on the left tree to mark whether it is the first or second time.<br/></p> <ol> <li>If this is the first time you mark yourself, move to the left and use the same strategy to execute the subtree (left tree).</li> <li>If it is the second time to mark yourself, after the recovery is complete, go to the right subtree to repeat the behavior (1,2).</li> </ol> </blockquote> <ol> <li>The node has no left tree and the node only arrives once. <ul> <li>If the rightmost node of the left subtree of a node points to empty, the node must be coming for the first time.</li> </ul> </li> <li>The node has a left tree and the node arrives twice. <ul> <li>If the rightmost node of the left subtree of the current node points to itself, the node must be coming for the second time.</li> </ul> </li> </ol> <h2 id="details">Details</h2> <p>Suppose the current node cur, and the cur comes to the header node at the beginning.</p> <ol> <li>If cur does not have a left child, cur moves to the right, <code class="language-plaintext highlighter-rouge">cur = cur.right</code>.</li> <li>If cur has a left child, find the rightmost node morrisRight of the left subtree. <ol> <li>If the right pointer of morrisRight points to null, let it point to cur, and then cur moves to the left, <code class="language-plaintext highlighter-rouge">cur = cur.left</code>.</li> <li>If the right pointer of morrisRight points to cur, let it point to null, and then cur moves to the right, <code class="language-plaintext highlighter-rouge">cur = cur.right</code>.</li> </ol> </li> <li>Cur is null and traversing stops.</li> </ol> <h2 id="logic">Logic</h2> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/20/1-480.webp 480w,/assets/img/2023/08/20/1-800.webp 800w,/assets/img/2023/08/20/1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/20/1.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><strong>Recursive order: ①②②②①③③③① [System stack]</strong></p> <p>Pre-order (the result of the first occurrence): ①②③ <br/> Middle order (the result of the second occurrence): ②①③ <br/> Post-order (the result of the third occurrence): ②③① <br/></p> <h3 id="morris-traversal-highly-simulates-recursive-behavior">Morris traversal highly simulates recursive behavior</h3> <ol> <li>There is no left subtree node and can only be reached once.</li> <li>There are left subtree nodes, which can reach 2 times.</li> <li>The node cannot be reached 3 times. <blockquote> <p>Morris uses <code class="language-plaintext highlighter-rouge">a node to point the right pointer to the left tree</code> to solve this problem.</p> </blockquote> </li> </ol> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/20/2-480.webp 480w,/assets/img/2023/08/20/2-800.webp 800w,/assets/img/2023/08/20/2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/20/2.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><strong>a, b, c, d, e, f, <code class="language-plaintext highlighter-rouge">d</code>, <code class="language-plaintext highlighter-rouge">a</code>, g, h, i, <code class="language-plaintext highlighter-rouge">h</code>, k, <code class="language-plaintext highlighter-rouge">g</code></strong></p> <h2 id="code-content">Code Content</h2> <blockquote> <p>Suppose the current node cur, and the cur comes to the header node at the beginning.</p> <ol> <li>If cur does not have a left child, cur moves to the right, <code class="language-plaintext highlighter-rouge">cur = cur.right</code>.</li> <li>If cur has a left child, find the rightmost node morrisRight of the left subtree. <blockquote> <ol> <li>If the right pointer of morrisRight points to null, let it point to cur, and then cur moves to the left, <code class="language-plaintext highlighter-rouge">cur = cur.left</code>.</li> </ol> </blockquote> <ol> <li>If the right pointer of morrisRight points to cur, let it point to null, and then cur moves to the right, <code class="language-plaintext highlighter-rouge">cur = cur.right</code>.</li> </ol> </li> <li>Cur is null and traversing stops。</li> </ol> </blockquote> <h3 id="general-code">General Code</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @author zhengstars
 * @date 2023/08/20
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Morris</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">right</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">()</span> <span class="o">{}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">right</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">morris</span><span class="o">(</span><span class="nc">Node</span> <span class="n">head</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">Node</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">morrisRight</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">// morrisRight is cur's left child</span>
            <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="o">){</span>
                    <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//After while execution, morrisRight comes to the position of the rightmost child in the left subtree of cur.</span>

                <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
                    <span class="c1">// Come to cur for the first time</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">cur</span><span class="o">;</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
                    <span class="k">continue</span><span class="o">;</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="c1">// Come to cur for the second time, morrisRight.right == cur</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="example"><strong>Example</strong></h4> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/20/3-480.webp 480w,/assets/img/2023/08/20/3-800.webp 800w,/assets/img/2023/08/20/3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/20/3.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><br/></p> <p>Morris traversal: <strong>①②④②⑤①③⑥③⑦</strong></p> <ul> <li>Pre-order (the result of the first occurrence): ①②④⑤③⑥⑦ <br/></li> <li>Middle order (the result of the second occurrence): ④②⑤①⑥③⑦ <br/></li> </ul> <h3 id="pre-order-traversal">Pre-order traversal</h3> <blockquote> <p>第一次出现的打印<br/></p> <ol> <li>There is no left node printing, there is a left node description to print 2 times</li> <li>Come to cur to print for the first time</li> </ol> </blockquote> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @author zhengstars
 * @date 2023/08/20
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Morris</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">right</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">()</span> <span class="o">{}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">right</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">morrisPre</span><span class="o">(</span><span class="nc">Node</span> <span class="n">head</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">Node</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">morrisRight</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">// morrisRight is cur's left child</span>
            <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="o">){</span>
                    <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//After while execution, morrisRight comes to the position of the rightmost child in the left subtree of cur.</span>

                <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">// Come to cur for the first time</span>
                    <span class="c1">// --- first time</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
                    
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">cur</span><span class="o">;</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
                    <span class="k">continue</span><span class="o">;</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="c1">// Come to cur for the second time, morrisRight.right == cur</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
               <span class="c1">// --- Arrive at yourself for the first time</span>
               <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">value</span><span class="o">);</span> 
            <span class="o">}</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="in-order-traversal">In-order traversal</h3> <blockquote> <ol> <li>The direct output of the node that can only reach itself once</li> <li>Nodes that can reach themselves twice only print the second time.</li> </ol> </blockquote> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @author zhengstars
 * @date 2023/08/20
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Morris</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">right</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">()</span> <span class="o">{}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">right</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">morrisIn</span><span class="o">(</span><span class="nc">Node</span> <span class="n">head</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">Node</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">morrisRight</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">// morrisRight is cur's left child</span>
            <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="o">){</span>
                    <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//After while execution, morrisRight comes to the position of the rightmost child in the left subtree of cur.</span>

                <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">// Come to cur for the first time</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">cur</span><span class="o">;</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
                    <span class="k">continue</span><span class="o">;</span> <span class="c1">//--- The first time you enter continue directly, while starts execution again.</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="c1">// Come to cur for the second time, morrisRight.right == cur</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="c1">//--- The second time come in and print directly.</span>
                <span class="o">}</span>
            <span class="o">}</span>
            
           <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>

           <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="post-order-traversal">Post-order traversal</h3> <blockquote> <p>Post-order traversal is the third visit before printing.</p> <ol> <li>Morris traversal there is no third visit.</li> <li>The Post-order can only care about the node that goes back to itself twice. <blockquote> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1. Skip the node that you can reach once.
</code></pre></div> </div> </blockquote> <ol> <li>For the node that you can reach twice <blockquote> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    1. When the second traversal arrives, `the right boundary of the current left subtree is printed in reverse order`.
</code></pre></div> </div> </blockquote> <ol> <li>After traversing, <code class="language-plaintext highlighter-rouge">you finally need to print the right boundary of the whole tree in reverse order</code>.</li> </ol> </li> </ol> </li> </ol> </blockquote> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @author zhengstars
 * @date 2023/08/20
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Morris</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">right</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">()</span> <span class="o">{}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span> <span class="o">}</span>
        <span class="nc">Node</span><span class="o">(</span><span class="kt">int</span> <span class="n">val</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">left</span><span class="o">,</span> <span class="nc">Node</span> <span class="n">right</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">morrisIn</span><span class="o">(</span><span class="nc">Node</span> <span class="n">head</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nc">Node</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">morrisRight</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">// morrisRight is cur's left child</span>
            <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="o">){</span>
                    <span class="n">morrisRight</span> <span class="o">=</span> <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//After while execution, morrisRight comes to the position of the rightmost child in the left subtree of cur.</span>

                <span class="k">if</span><span class="o">(</span><span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">// Come to cur for the first time</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">cur</span><span class="o">;</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
                    <span class="k">continue</span><span class="o">;</span> 
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="c1">// Come to cur for the second time, morrisRight.right == cur</span>
                    <span class="n">morrisRight</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                   
                    <span class="c1">// --- Print the right boundary of the left subtree of cur in reverse order</span>
                    <span class="n">reversePrintEdge</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>

           <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
        <span class="o">}</span>

       <span class="c1">// --- Finally, print the right boundary of the whole tree in reverse order.</span>
       <span class="n">reversePrintEdge</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
    <span class="o">}</span>

   <span class="cm">/**
    * The tree headed by head prints its right boundary in reverse order
    * @param head
    */</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">reversePrintEdge</span><span class="o">(</span><span class="nc">Node</span> <span class="n">head</span><span class="o">){</span>
        <span class="c1">// Get the tail pointer, the rightmost node</span>
        <span class="nc">Node</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">reverse</span><span class="o">(</span><span class="n">head</span><span class="o">);</span>
        <span class="nc">Node</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">tail</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
           <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cur</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
           <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
        <span class="o">}</span>
        
        <span class="c1">// Reverse again at this time</span>
        <span class="n">reverse</span><span class="o">(</span><span class="n">tail</span><span class="o">);</span>
    <span class="o">}</span>

   <span class="cm">/**
    * Reverse change of pointer direction similar to single linked list
    * @param from
    * @return
    */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">node</span> <span class="nf">reverse</span><span class="o">(</span><span class="nc">Node</span> <span class="n">from</span><span class="o">){</span>
        <span class="nc">Node</span> <span class="n">pre</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">Node</span> <span class="n">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        
        <span class="k">while</span><span class="o">(</span><span class="n">from</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">// At this time, from is not equal to null because the last one becomes null after being converted to next.</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">from</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
            <span class="n">from</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">pre</span><span class="o">;</span>
            
            <span class="n">pre</span> <span class="o">=</span> <span class="n">from</span><span class="o">;</span>
            <span class="n">from</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">pre</span><span class="o">;</span>
    <span class="o">}</span>
    
<span class="o">}</span>
</code></pre></div></div> <h4 id="example-1"><strong>Example</strong></h4> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/20/4-480.webp 480w,/assets/img/2023/08/20/4-800.webp 800w,/assets/img/2023/08/20/4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/20/4.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><br/></p> <p>Post-order: ⑧⑨④⑤②⑥⑩⑪⑦③①</p>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[Morris traversal of binary Tree]]></summary></entry><entry><title type="html">LRU LinkedList</title><link href="https://zhengstar94.github.io//blog/2023/LRU-LinkedList/" rel="alternate" type="text/html" title="LRU LinkedList"/><published>2023-08-19T00:00:00+00:00</published><updated>2023-08-19T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/LRU-LinkedList</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/LRU-LinkedList/"><![CDATA[<h1 id="lru-linkedlist">LRU LinkedList</h1> <h2 id="concept">Concept</h2> <p>Implementation of the LRU (least recently used) cache to manage a set of key-value pairs, in which up to maxSize key-value pairs are saved.</p> <h2 id="steps">Steps</h2> <ul> <li> <p>ListNode Class：</p> <ul> <li>This is an inner class that represents nodes in a two-way linked list. Each node contains a key (key), a value (value), a precursor node (prev) and a successor node (next).</li> </ul> </li> <li> <p>LRUCache Class：</p> <p>This is the actual cache class that is used to manage the LRU cache.</p> <ul> <li><code class="language-plaintext highlighter-rouge">cache</code>：This is a mapping where the key is a string and the value is the corresponding node, which is used to quickly find the node in the cache.</li> <li><code class="language-plaintext highlighter-rouge">maxSize</code>：Specifies the maximum capacity of the cache.</li> <li><code class="language-plaintext highlighter-rouge">head</code> &amp; <code class="language-plaintext highlighter-rouge">tail</code>：The Sentinel node serves as the head and tail of the linked list, respectively.</li> </ul> </li> <li> <p>Constructor function LRUCache(int maxSize)：</p> <ul> <li>Initialize the LRU cache. Create an empty <code class="language-plaintext highlighter-rouge">cache</code> map and set the connection between the head and tail sentinel nodes.</li> </ul> </li> <li> <p>insertKeyValuePair function：</p> <ul> <li>If the key already exists in the cache, update the value of the corresponding node and move the node to the header of the linked list (indicating that it has been recently used). If the key does not exist, check that the cache is full, if so, remove the tail node (longest unused), and then insert a new node into the header of the linked list. In any case, the cache mapping needs to be updated.</li> </ul> </li> <li> <p>getValueFromKey function：</p> <ul> <li>If the key exists in the cache, the value of the corresponding node is returned and the node is moved to the header of the linked list. If the key does not exist, return-1 (or you can throw an exception to indicate that it is not found).</li> </ul> </li> <li> <p>getMostRecentKey function：</p> <ul> <li>Returns the most recently used key (that is, the key of the header node of the linked list), or an empty string if the cache is empty (or throws an exception to indicate that the cache is empty).</li> </ul> </li> <li> <p>addToHead function：</p> <ul> <li>Insert a node at the head of the linked list.</li> </ul> </li> <li> <p>removeNode function：</p> <ul> <li>Removes the specified node from the linked list.</li> </ul> </li> <li> <p>moveToHead function：</p> <ul> <li>Move a node to the head of the linked list.</li> </ul> </li> <li> <p>removeTail function：</p> <ul> <li>Remove the tail node of the linked list and return to it.</li> </ul> </li> </ul> <h2 id="detailed-method-interpretation">Detailed method interpretation</h2> <h3 id="addtohead">addToHead</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">addToHead</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">node</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>     <span class="c1">// Point the next node of the new node to the next node of the current header node</span>
    <span class="n">node</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>          <span class="c1">// Point the previous node of the new node to the header node</span>
    <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>     <span class="c1">// Point the previous node of the current header node to the new node</span>
    <span class="n">head</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>          <span class="c1">// Point the next node of the head node to the new node to complete the insert operation</span>
<span class="o">}</span>
</code></pre></div></div> <p>1.<strong>Initialization LinkedList</strong><br/></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/22-480.webp 480w,/assets/img/2023/08/22-800.webp 800w,/assets/img/2023/08/22-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/22.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>2.<strong>Add new node4 to head, The node4 node points to head.next and the node4.prev points to head, <code class="language-plaintext highlighter-rouge">node.next = head.next</code>, <code class="language-plaintext highlighter-rouge">node.prev = head</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/23-480.webp 480w,/assets/img/2023/08/23-800.webp 800w,/assets/img/2023/08/23-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/23.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>3.<strong>Head.next.prev points to the node4 node, <code class="language-plaintext highlighter-rouge">head.next.prev = node</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/24-480.webp 480w,/assets/img/2023/08/24-800.webp 800w,/assets/img/2023/08/24-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/24.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>4.<strong>Head next points to the node4 node, <code class="language-plaintext highlighter-rouge">head.next = node</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/25-480.webp 480w,/assets/img/2023/08/25-800.webp 800w,/assets/img/2023/08/25-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/25.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <h3 id="removenode">removeNode</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">removeNode</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">node</span><span class="o">.</span><span class="na">prev</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>     <span class="c1">// Point the next node of the previous node of the current node to the next node of the current node</span>
        <span class="n">node</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>     <span class="c1">// Point the previous node of the next node of the current node to the previous node of the current node</span>
        <span class="o">}</span>
</code></pre></div></div> <p>1.<strong>Initialization LinkedList</strong><br/></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/26-480.webp 480w,/assets/img/2023/08/26-800.webp 800w,/assets/img/2023/08/26-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/26.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>2.<strong>Remove the node2 node, the next node of the previous node of node2, and point to the next node of node2, <code class="language-plaintext highlighter-rouge">node.prev.next = node.next</code></strong><br/></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/27-480.webp 480w,/assets/img/2023/08/27-800.webp 800w,/assets/img/2023/08/27-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/27.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>3.<strong>The prev node of the next node of node2 points to the prev node of node2, <code class="language-plaintext highlighter-rouge">node.next.prev = node.prev</code></strong><br/></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/28-480.webp 480w,/assets/img/2023/08/28-800.webp 800w,/assets/img/2023/08/28-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/28.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <h2 id="code">Code</h2> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">LinkedLists</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="cm">/**
 * @author zhengstars
 * @date 2023/06/25
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LRUCache</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">ListNode</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">key</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
        <span class="nc">ListNode</span> <span class="n">prev</span><span class="o">;</span>
        <span class="nc">ListNode</span> <span class="n">next</span><span class="o">;</span>

        <span class="nc">ListNode</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="n">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">ListNode</span><span class="o">&gt;</span> <span class="n">cache</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">maxSize</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ListNode</span> <span class="n">head</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ListNode</span> <span class="n">tail</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">LRUCache</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxSize</span> <span class="o">=</span> <span class="n">maxSize</span><span class="o">;</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">head</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ListNode</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="n">tail</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ListNode</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="n">head</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">tail</span><span class="o">;</span>
        <span class="n">tail</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertKeyValuePair</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cache</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">ListNode</span> <span class="n">node</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="n">node</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="n">moveToHead</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">cache</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="n">maxSize</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">ListNode</span> <span class="n">removedNode</span> <span class="o">=</span> <span class="n">removeTail</span><span class="o">();</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">removedNode</span><span class="o">.</span><span class="na">key</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="nc">ListNode</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ListNode</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
            <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">newNode</span><span class="o">);</span>
            <span class="n">addToHead</span><span class="o">(</span><span class="n">newNode</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getValueFromKey</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cache</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">ListNode</span> <span class="n">node</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="n">moveToHead</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// or throw an exception to indicate key not found</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMostRecentKey</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">head</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="n">tail</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">key</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="s">""</span><span class="o">;</span> <span class="c1">// or throw an exception to indicate cache is empty</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addToHead</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">node</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="n">node</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>
        <span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
        <span class="n">head</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">removeNode</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">node</span><span class="o">.</span><span class="na">prev</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="n">node</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">moveToHead</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">removeNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="n">addToHead</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">ListNode</span> <span class="nf">removeTail</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ListNode</span> <span class="n">removedNode</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
        <span class="n">removeNode</span><span class="o">(</span><span class="n">removedNode</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">removedNode</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">LRUCache</span> <span class="n">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LRUCache</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">insertKeyValuePair</span><span class="o">(</span><span class="s">"b"</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">insertKeyValuePair</span><span class="o">(</span><span class="s">"a"</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">insertKeyValuePair</span><span class="o">(</span><span class="s">"c"</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">getMostRecentKey</span><span class="o">();</span> <span class="c1">// Output: "c"</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">getValueFromKey</span><span class="o">(</span><span class="s">"a"</span><span class="o">);</span> <span class="c1">// Output: 1</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">getMostRecentKey</span><span class="o">();</span> <span class="c1">// Output: "a"</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">insertKeyValuePair</span><span class="o">(</span><span class="s">"d"</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">getValueFromKey</span><span class="o">(</span><span class="s">"b"</span><span class="o">);</span> <span class="c1">// Output: -1</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">insertKeyValuePair</span><span class="o">(</span><span class="s">"a"</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>

        <span class="n">cache</span><span class="o">.</span><span class="na">getValueFromKey</span><span class="o">(</span><span class="s">"a"</span><span class="o">);</span> <span class="c1">// Output: 5</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[LRU LinkedList]]></summary></entry><entry><title type="html">Reverse LinkedList</title><link href="https://zhengstar94.github.io//blog/2023/ReverseLinkedList/" rel="alternate" type="text/html" title="Reverse LinkedList"/><published>2023-08-19T00:00:00+00:00</published><updated>2023-08-19T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2023/ReverseLinkedList</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2023/ReverseLinkedList/"><![CDATA[<h1 id="reverse-linked-list">Reverse Linked List</h1> <h2 id="solution-traverse-the-linked-list-pointing-the-next-of-each-node-to-the-previous-node">Solution (Traverse the linked list, pointing the next of each node to the previous node)</h2> <ol> <li>Save the next of the current node, <code class="language-plaintext highlighter-rouge">next = curr.next</code></li> <li>Point the next of the current node to the previous node, <code class="language-plaintext highlighter-rouge">curr.next = prev</code></li> <li>Move the forward pointer back to <code class="language-plaintext highlighter-rouge">prev = curr</code></li> <li>Move the current pointer back to <code class="language-plaintext highlighter-rouge">curr = next</code></li> </ol> <h2 id="step">Step</h2> <p>1.<strong>Initial list and pre node</strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/1-480.webp 480w,/assets/img/2023/08/1-800.webp 800w,/assets/img/2023/08/1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/1.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>2.<strong>Initial list and next node, <code class="language-plaintext highlighter-rouge">next = curr.next</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/2-480.webp 480w,/assets/img/2023/08/2-800.webp 800w,/assets/img/2023/08/2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/2.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>3.<strong>The current.next points to the pre node, <code class="language-plaintext highlighter-rouge">curr.next = prev</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/3-480.webp 480w,/assets/img/2023/08/3-800.webp 800w,/assets/img/2023/08/3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/3.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>4.<strong>The pre node points to the current node, <code class="language-plaintext highlighter-rouge">prev = curr</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/4-480.webp 480w,/assets/img/2023/08/4-800.webp 800w,/assets/img/2023/08/4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/4.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>5.<strong>The current node points to the next node, <code class="language-plaintext highlighter-rouge">curr = nex</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/5-480.webp 480w,/assets/img/2023/08/5-800.webp 800w,/assets/img/2023/08/5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/5.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>6.<strong>The next node moves to the current.next, <code class="language-plaintext highlighter-rouge">next = curr.next</code></strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/6-480.webp 480w,/assets/img/2023/08/6-800.webp 800w,/assets/img/2023/08/6-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/6.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>7.<strong>Loop traversal</strong></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/7-480.webp 480w,/assets/img/2023/08/7-800.webp 800w,/assets/img/2023/08/7-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/7.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/8-480.webp 480w,/assets/img/2023/08/8-800.webp 800w,/assets/img/2023/08/8-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/8.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/9-480.webp 480w,/assets/img/2023/08/9-800.webp 800w,/assets/img/2023/08/9-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/9.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/10-480.webp 480w,/assets/img/2023/08/10-800.webp 800w,/assets/img/2023/08/10-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/10.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/11-480.webp 480w,/assets/img/2023/08/11-800.webp 800w,/assets/img/2023/08/11-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/11.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/12-480.webp 480w,/assets/img/2023/08/12-800.webp 800w,/assets/img/2023/08/12-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/12.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/13-480.webp 480w,/assets/img/2023/08/13-800.webp 800w,/assets/img/2023/08/13-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/13.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/14-480.webp 480w,/assets/img/2023/08/14-800.webp 800w,/assets/img/2023/08/14-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/14.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/15-480.webp 480w,/assets/img/2023/08/15-800.webp 800w,/assets/img/2023/08/15-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/15.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/16-480.webp 480w,/assets/img/2023/08/16-800.webp 800w,/assets/img/2023/08/16-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/16.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/17-480.webp 480w,/assets/img/2023/08/17-800.webp 800w,/assets/img/2023/08/17-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/17.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/18-480.webp 480w,/assets/img/2023/08/18-800.webp 800w,/assets/img/2023/08/18-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/18.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/19-480.webp 480w,/assets/img/2023/08/19-800.webp 800w,/assets/img/2023/08/19-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/19.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/20-480.webp 480w,/assets/img/2023/08/20-800.webp 800w,/assets/img/2023/08/20-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/20.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2023/08/21-480.webp 480w,/assets/img/2023/08/21-800.webp 800w,/assets/img/2023/08/21-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2023/08/21.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <h2 id="code">Code</h2> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">LinkedLists</span><span class="o">;</span>

<span class="cm">/**
 * @author zhengstars
 * @date 2023/08/19
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReverseLinkedList</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ListNode</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
        <span class="nc">ListNode</span> <span class="n">next</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">ListNode</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ListNode</span> <span class="nf">reverseLinkedList</span><span class="o">(</span><span class="nc">ListNode</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ListNode</span> <span class="n">prev</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="nc">ListNode</span> <span class="n">curr</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span>

        <span class="nc">ListNode</span> <span class="n">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">curr</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
            <span class="n">curr</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">curr</span><span class="o">;</span>
            <span class="n">curr</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>

        <span class="o">}</span>
        <span class="k">return</span> <span class="n">prev</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>]]></content><author><name></name></author><category term="Data Structure"/><summary type="html"><![CDATA[Reverse Linked List]]></summary></entry><entry><title type="html">When to use the different log levels</title><link href="https://zhengstar94.github.io//blog/2022/WhenToUseTheDifferentLogLevels/" rel="alternate" type="text/html" title="When to use the different log levels"/><published>2022-10-09T00:00:00+00:00</published><updated>2022-10-09T00:00:00+00:00</updated><id>https://zhengstar94.github.io//blog/2022/WhenToUseTheDifferentLogLevels</id><content type="html" xml:base="https://zhengstar94.github.io//blog/2022/WhenToUseTheDifferentLogLevels/"><![CDATA[<h1 id="when-to-use-the-different-log-levels">When to use the different log levels</h1> <h2 id="there-are-different-ways-to-log-messages-in-order-of-fatality">There are different ways to log messages, in order of fatality:</h2> <ol> <li>FATAL</li> <li>ERROR</li> <li>WARN</li> <li>INFO</li> <li>DEBUG</li> <li>TRACE</li> </ol> <blockquote> <p>How do I decide when to use which?<br/> What’s a good heuristic to use?</p> </blockquote> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022/10/09/1-480.webp 480w,/assets/img/2022/10/09/1-800.webp 800w,/assets/img/2022/10/09/1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/2022/10/09/1.png" class="img-fluid rounded z-depth-1" width="70%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <ul> <li><strong>Trace</strong> - Only when I would be “tracing” the code and trying to find one <strong>part</strong> of a function specifically.</li> <li><strong>Debug</strong> - Information that is diagnostically helpful to people more than just developers (IT, sysadmins, etc.).</li> <li><strong>Info</strong> - Generally useful information to log (service start/stop, configuration assumptions, etc). Info I want to always have available but usually don’t care about under normal circumstances. This is my out-of-the-box config level.</li> <li><strong>Warn</strong> - Anything that can potentially cause application oddities, but for which I am automatically recovering. (Such as switching from a primary to backup server, retrying an operation, missing secondary data, etc.)</li> <li><strong>Error</strong> - Any error which is fatal to the <strong>operation</strong>, but not the service or application (can’t open a required file, missing data, etc.). These errors will force user (administrator, or direct user) intervention. These are usually reserved (in my apps) for incorrect connection strings, missing services, etc.</li> <li><strong>Fatal</strong> - Any error that is forcing a shutdown of the service or application to prevent data loss (or further data loss). I reserve these only for the most heinous errors and situations where there is guaranteed to have been data corruption or loss.</li> </ul>]]></content><author><name></name></author><category term="Work"/><summary type="html"><![CDATA[When to use the different log levels]]></summary></entry></feed>