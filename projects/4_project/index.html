<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Design Notification | zhengxingxing </title> <meta name="author" content="Xingxing Zheng"> <meta name="description" content="How to design Notification"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.22.4/dist/bootstrap-table.min.css" integrity="sha256-uRX+PiRTR4ysKFRCykT8HLuRCub26LgXJZym3Yeom1c=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://zhengstar94.github.io//projects/4_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> zhengxingxing </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">learning <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">archive </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/archive_by_year">by year</a> <a class="dropdown-item " href="/archive_by_tag">by category</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Design Notification</h1> <p class="post-meta"> Created in August 06, 2025 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2025   ·   <i class="fa-solid fa-tag fa-sm"></i> SystemDesign </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="understanding-the-problem-what-is-a-notification-system">Understanding the Problem (What is a Notification System)</h2> <p>A notification system is a distributed software architecture designed to send various types of messages (such as push notifications, SMS, or emails) to users, enabling real-time or near-real-time information delivery and user interaction. This system typically handles large-scale traffic, ensures reliable message delivery, supports user customization (such as unsubscribing), and enables data tracking. It is widely used in scenarios like e-commerce, social networking, and finance.</p> <h3 id="why-do-we-need-a-notification-system">Why Do We Need a Notification System?</h3> <p>Notification systems primarily address the following practical issues:</p> <ol> <li> <p>Enhancing User Interaction and Experience</p> <ul> <li> <p>Real-time delivery of critical information (e.g., order updates, promotions) to improve user retention.</p> </li> <li> <p>Support for multiple channels (e.g., app push, SMS, email) to accommodate different user preferences.</p> </li> <li> <p>Personalized content to increase user satisfaction and reduce disruptions.</p> </li> </ul> </li> <li> <p>Improving Business Operational Efficiency</p> <ul> <li> <p>Automated message triggering to minimize manual intervention.</p> </li> <li> <p>Tracking delivery rates and click behaviors to support data analysis and A/B testing.</p> </li> <li> <p>Compliance management (e.g., privacy protection, unsubscribe mechanisms) to reduce legal risks.</p> </li> </ul> </li> <li> <p>Technical Characteristics</p> <ul> <li> <p>High availability and scalability, supporting billions of notifications.</p> </li> <li> <p>Asynchronous decoupling for system stability and low latency.</p> </li> <li> <p>Cost optimization through caching and batch processing to reduce third-party call expenses.</p> </li> </ul> </li> </ol> <h3 id="example">Example</h3> <p>Consider an e-commerce platform where a user places an order and needs timely confirmation:<br> Original Scenario: Users might manually refresh pages or check emails for order status, leading to oversights.<br> With a Notification System: The system automatically sends a push notification “Your order has been confirmed and is expected to ship within 3 days,” with SMS as a backup. If the user unsubscribes from push notifications, the system switches to email, ensuring reliable delivery while recording click rates to optimize future marketing.<br> This process not only enhances user convenience but also helps the platform analyze user behavior and improve overall operational efficiency.</p> <hr> <h2 id="1-requirements-analysis-and-scope-definition">1. Requirements Analysis and Scope Definition</h2> <h3 id="11-functional-requirements">1.1. Functional Requirements</h3> <ul> <li> <strong>Core</strong>: <ul> <li>Support for multiple notification types: push notifications, SMS, emails.</li> <li>Business-side triggering of notification sending.</li> </ul> </li> <li> <strong>Secondary</strong>: <ul> <li>User unsubscribe management, allowing unsubscribes by type.</li> <li>Notification log recording and querying.</li> <li>Adaptation and switching of third-party services.</li> </ul> </li> <li> <strong>Extensions</strong>: <ul> <li>Delayed task scheduling, priority scheduling, content personalization, A/B testing, data analysis, compliance auditing.</li> </ul> </li> </ul> <h3 id="12-non-functional-requirements">1.2. Non-Functional Requirements</h3> <ul> <li> <strong>High Availability</strong>: The system must withstand failures, targeting 99.99% availability with multi-availability zone deployment.</li> <li> <strong>Scalability</strong>: Handle growth from 100,000 to 10 billion notifications per day (e.g., from 1 QPS to 70,000 QPS).</li> <li> <strong>Low Latency</strong>: Push notifications &lt;2 seconds, SMS/emails &lt;5 minutes. API response &lt;200 ms.</li> <li> <strong>Durability</strong>: Notification logs must not be lost (99.999% durability).</li> <li> <strong>Consistency</strong>: At-least-once consistency for notification delivery, eventual consistency for unsubscribes; strong consistency for critical operations like verification codes. <ul> <li> <strong>Consistency Model Trade-offs (Based on CAP Theorem)</strong>: Under the CAP theorem (Consistency, Availability, Partition Tolerance), this system prioritizes AP (Availability and Partition Tolerance) since network partitions are inevitable in distributed environments. Unsubscribes use eventual consistency, sacrificing short-term C (Consistency) for high A (Availability), suitable for non-critical scenarios (e.g., marketing notifications with up to 1-minute delay). For critical notifications like verification codes, employ strong consistency using distributed locks (e.g., Redis Lock) to ensure C, but this reduces A and throughput (potential bottleneck: lock contention increases latency by 10-20%). Trade-off: If business requires high consistency, introduce Saga patterns for compensating transactions; otherwise, eventual consistency reduces complexity and boosts performance.</li> </ul> </li> <li> <strong>Security</strong>: Encrypted transmission and storage, anti-abuse measures, and content filtering. Notification content desensitization: Sensitive information (e.g., phone numbers, emails) masked in logs and transmission (e.g., 138<em>**</em>1234), decrypted only during sending; use HashiCorp Vault for key management.</li> <li> <strong>Cost-Effectiveness</strong>: Optimize third-party call costs, controlling expenses per million notifications within reasonable limits.</li> </ul> <h3 id="13-detailed-requirements-breakdown-and-challenges">1.3. Detailed Requirements Breakdown and Challenges</h3> <table> <thead> <tr> <th style="text-align: left">Module</th> <th style="text-align: left">Priority</th> <th style="text-align: left">Core Challenges</th> <th style="text-align: left">Design Decisions</th> <th style="text-align: left">Scalability Considerations</th> <th style="text-align: left">Constraints</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>Notification Sending</strong></td> <td style="text-align: left">Highest</td> <td style="text-align: left">1. Consistent handling of multiple types<br>2. Peak shaving for high concurrency<br>3. Third-party rate limiting</td> <td style="text-align: left">1. <strong>Kafka asynchronous queue</strong><br>2. <strong>Worker microservices</strong><br>3. <strong>Circuit breaking and retries</strong> </td> <td style="text-align: left">1. Partition expansion (initial 5 partitions, dynamic increase)<br>2. Kubernetes HPA<br>3. Multi-provider routing</td> <td style="text-align: left">Push latency &lt;2 seconds, SMS/email &lt;5 minutes; types limited to (push/sms/email)</td> </tr> <tr> <td style="text-align: left"><strong>Unsubscribe Management</strong></td> <td style="text-align: left">High</td> <td style="text-align: left">1. Real-time effectiveness<br>2. Data consistency<br>3. User privacy</td> <td style="text-align: left">1. <strong>Redis caching</strong><br>2. <strong>Canal synchronization</strong><br>3. <strong>RBAC control</strong> </td> <td style="text-align: left">1. Sharding (by user_id hash)<br>2. Batch update optimization<br>3. Geographic partitioning</td> <td style="text-align: left">Unsubscribe effective latency &lt;1 minute, display limits (e.g., “Unsubscribed”)</td> </tr> <tr> <td style="text-align: left"><strong>Log Recording</strong></td> <td style="text-align: left">Medium</td> <td style="text-align: left">1. High write throughput<br>2. Query efficiency<br>3. Storage costs</td> <td style="text-align: left">1. <strong>Elasticsearch</strong><br>2. <strong>TraceID</strong><br>3. <strong>Hot-cold separation</strong> </td> <td style="text-align: left">1. Sharding expansion (by time)<br>2. Index optimization<br>3. S 3 archiving</td> <td style="text-align: left">Query latency &lt;500 ms, retention 30 days</td> </tr> <tr> <td style="text-align: left"><strong>Monitoring and Alerting</strong></td> <td style="text-align: left">Low</td> <td style="text-align: left">1. Real-time metric collection<br>2. Alert accuracy<br>3. Visualization</td> <td style="text-align: left">1. <strong>Prometheus</strong><br>2. <strong>Grafana</strong><br>3. <strong>SLO definition</strong> </td> <td style="text-align: left">1. Distributed tracing<br>2. Automated alerting<br>3. Metric extension</td> <td style="text-align: left">Success rate &gt;99.9%, Lag &gt;10000 alerting</td> </tr> </tbody> </table> <hr> <h2 id="2-capacity-estimation-and-api-design">2. Capacity Estimation and API Design</h2> <h3 id="21-capacity-estimation">2.1. Capacity Estimation</h3> <p><strong>Assumptions</strong>:</p> <ul> <li> <strong>DAU (Daily Active Users)</strong>: 10 million (initial, scalable to 100 million).</li> <li> <strong>Notification Volume</strong>: 10 million pushes, 1 million SMS, 5 million emails per day.</li> <li> <strong>Peak</strong>: Push QPS ≈ 694 (10 million / 86400 seconds), SMS/email QPS ≈ 11.57 / 57.87.</li> <li> <strong>Notification Size</strong>: Push 1 KB, SMS 100 bytes, email 5 KB.</li> <li> <strong>Unsubscribe Rate</strong>: 5% of users unsubscribe from certain types.</li> <li> <strong>Third-Party Limits</strong>: APNs unlimited, Twilio QPS 100, SendGrid batch 1000.</li> </ul> <p><strong>Calculations</strong>:</p> <ul> <li> <strong>Daily Storage Growth</strong>: Notification logs 10 million * 1 KB + 1 million * 100 bytes + 5 million * 5 KB ≈ 10 GB + 100 MB + 25 GB = 35.1 GB/day.</li> <li> <strong>Monthly Storage Growth</strong>: 35.1 GB/day * 30 days ≈ 1 TB/month.</li> <li> <strong>Daily Egress Traffic</strong>: Push 10 million * 1 KB ≈ 10 GB, SMS 1 million * 100 bytes ≈ 100 MB, email 5 million * 5 KB ≈ 25 GB. <ul> <li> <strong>Total Traffic</strong>: 35 GB/day.</li> </ul> </li> <li> <strong>API QPS</strong>: <ul> <li>Sending-related: 10 million * 5 API calls (routing, queries, etc.) = 50 million/day ≈ 578 QPS.</li> <li>Unsubscribe-related: 1 million * 2 API calls = 2 million/day ≈ 23 QPS.</li> <li>Others (queries, configs): 5 million/day ≈ 58 QPS.</li> <li> <strong>Total</strong>: 50 million + 2 million + 5 million ÷ 86400 ≈ 659 QPS.</li> <li> <strong>Peak</strong>: 659 * 3 (burst events) ≈ 1977 QPS.</li> </ul> </li> </ul> <h3 id="22-api-design">2.2. API Design</h3> <p>All APIs are authenticated via API Gateway using JWT.</p> <p><strong>1. Send Notification</strong></p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">POST /v1/notifications/send</code></strong> <ul> <li> <strong>Description</strong>: Trigger sending one or more notification types.</li> <li> <strong>Request Body</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u12345"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"push"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Message"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You have a new notification"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"delaySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> <li> <strong>Response Body (200 OK)</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m98765"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notification scheduled"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> </ul> <p><strong>2. Unsubscribe Notification</strong></p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">POST /v1/notifications/unsubscribe</code></strong> <ul> <li> <strong>Description</strong>: User unsubscribes from specific notification types.</li> <li> <strong>Request Body</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u12345"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"email"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> <li> <strong>Response Body (200 OK)</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsubscribed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"email"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> </ul> <p><strong>3. Query Notification Logs</strong></p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">GET /v1/notifications/logs/{userId}?startTime=2025-08-01T00:00:00Z&amp;endTime=2025-08-05T00:00:00Z&amp;page=1&amp;size=20</code></strong> <ul> <li> <strong>Description</strong>: Retrieve user notification history.</li> <li> <strong>Response Body (200 OK)</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m98765"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-08-04T10:00:00Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> </ul> <p><strong>4. Configure Notification</strong></p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">POST /v1/notifications/config</code></strong> <ul> <li> <strong>Description</strong>: Update system configurations (e.g., third-party keys).</li> <li> <strong>Request Body</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apns"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> <li> <strong>Response Body (200 OK)</strong>: <div class="language-json highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"updated"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> </ul> <hr> <h2 id="3-high-level-design">3. High-Level Design</h2> <h3 id="31-architecture-diagrams">3.1. Architecture Diagrams</h3> <p>To avoid clutter from excessive connections in a single diagram, the following provides layered architecture diagrams: the main send notification path diagram, unsubscribe synchronization diagram, and system operations and monitoring diagram. These focus on different aspects for clarity.</p> <p><strong>Diagram 1: Send Notification Main Path Diagram (Send Path Diagram)</strong><br> Purpose: Focus on the primary data flow from business requests to third-party sending, simplifying configuration and monitoring lines.</p> <pre><code class="language-mermaid">flowchart LR
  Client[Business Side] --&gt; APIGW[API Gateway]
  APIGW --&gt; Router[Notification Router Service]
  Router --&gt; Kafka[Kafka Notification Queue]
  Kafka --&gt; Worker[Notification Sending Worker Cluster]
  Worker --&gt; Redis[Redis - Token &amp; Unsubscribe Cache]
  Worker --&gt; ES[Elasticsearch - Log Recording]
  Worker --&gt; Providers[Third-Party Providers]
</code></pre> <p><strong>Diagram 2: Unsubscribe Synchronization Diagram (Unsubscribe Sync Diagram)</strong><br> Purpose: Separately illustrate unsubscribe-related components, highlighting the Canal synchronization mechanism to avoid main diagram confusion.</p> <pre><code class="language-mermaid">flowchart TD
U[User] --&gt; A[Unsubscribe API]
A --&gt; B[MySQL - Unsubscribe Table]
B --&gt; C[Canal - Binlog Sync]
C --&gt; D[Redis - Subscription Cache]
E[Worker - During Push] --&gt; D
</code></pre> <p><strong>Diagram 3: System Operations and Monitoring Diagram (Ops &amp; Monitoring Diagram)</strong><br> Purpose: Focus on relationships between DevOps, configuration center, monitoring, and alerting components.</p> <pre><code class="language-mermaid">flowchart TD
subgraph Configuration and Scheduling
A[Nacos - Configuration Center] --&gt; B[Router Service]
A --&gt; C[Worker Services]
D[Quartz - Scheduled Scheduling] --&gt; E[Kafka - Delay Topic]
end
subgraph Monitoring and Alerting
F[Prometheus] --&gt; G[Grafana Dashboard]
F --&gt; H[AlertManager]
F --&gt; C
end
subgraph Logging and Tracing
C --&gt; I[Elasticsearch - Structured Logs]
B --&gt; I
end
</code></pre> <h3 id="32-core-components">3.2. Core Components</h3> <ol> <li> <strong>Client/Business Side</strong>: Web/App or internal services that trigger notifications.</li> <li> <strong>Load Balancer (ALB)</strong>: Distributes traffic to the API Gateway.</li> <li> <strong>API Gateway</strong>: Single entry point for authentication, rate limiting, and routing.</li> <li> <strong>Microservices</strong>: <ul> <li> <strong>Notification Router Service</strong>: Parses requests and routes to Kafka.</li> <li> <strong>Push/SMS/Email Workers</strong>: Consume queues and send notifications.</li> <li> <strong>Unsubscribe Service</strong>: Manages user unsubscribes.</li> </ul> </li> <li> <strong>Data Storage</strong>: <ul> <li> <strong>Message Queue (Kafka)</strong>: For asynchronous tasks.</li> <li> <strong>Cache (Redis)</strong>: For unsubscribes, tokens, and configurations.</li> <li> <strong>Database (MySQL)</strong>: For persistent data.</li> <li> <strong>Logs (Elasticsearch)</strong>: For notification records.</li> </ul> </li> <li> <strong>Configuration Center (Nacos)</strong>: For dynamic parameters.</li> <li> <strong>Monitoring (Prometheus/Grafana)</strong>: For metrics and alerts.</li> <li> <strong>Task Scheduler (Quartz)</strong>: For delayed notifications.</li> </ol> <h3 id="33-data-flow-diagram-mermaid">3.3. Data Flow Diagram (Mermaid)</h3> <pre><code class="language-mermaid">graph TD
A[Business Request] --&gt; B[API Gateway]
B --&gt; C[Notification Router]
C --&gt; D[Kafka Queue]
D --&gt; E[Worker Services]
E --&gt; F[Third-Party Providers]
E --&gt; G[Redis Cache - Check Subscription]
G --&gt; E
E --&gt; H[Elasticsearch - Log]
Client[User Feedback] --&gt; I[Unsubscribe Service]
I --&gt; J[MySQL - Update]
J --&gt; K[Canal Sync]
K --&gt; G[Redis Update]
Scheduler[Quartz] --&gt; D[Enqueue Delayed]
Monitoring[Prometheus] --&gt; E &amp; C
</code></pre> <hr> <h2 id="4-core-process-in-depth-design">4. Core Process In-Depth Design</h2> <h3 id="41-notification-sending-process">4.1. Notification Sending Process</h3> <p>Objective: Ensure real-time and reliability using asynchronous queues for decoupling.</p> <p><strong>Process Steps</strong>:</p> <ol> <li> <strong>Business Side Request</strong>: Invoke API to send notification.</li> <li> <strong>API Gateway Handling</strong>: Authentication and rate limiting.</li> <li> <strong>Routing Engine</strong>: Generate message_id and route to Kafka Topic (partitioned by type).</li> <li> <strong>Worker Consumption</strong>: Check Redis for unsubscribes/invalid tokens.</li> <li> <strong>Sending</strong>: Call third-party and record results in ES.</li> <li> <strong>Retry</strong>: Failures go to DLQ or retry.</li> </ol> <p><strong>Java Code Example (Notification Routing Engine)</strong>:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.notification</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.gson.Gson</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.kafka.clients.admin.AdminClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.kafka.clients.admin.NewPartitions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.kafka.clients.producer.KafkaProducer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.kafka.clients.producer.ProducerRecord</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.kafka.common.serialization.StringSerializer</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="o">;</span>

<span class="cm">/**
 * Notification Routing Engine
 * Responsible for parsing requests, generating unique IDs, and routing to Kafka.
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NotificationRouter</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">KafkaProducer</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">producer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Gson</span><span class="o">();</span>

    <span class="kd">public</span> <span class="nf">NotificationRouter</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Properties</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bootstrap.servers"</span><span class="o">,</span> <span class="s">"kafka:9092"</span><span class="o">);</span> <span class="c1">// Configure Kafka broker address</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key.serializer"</span><span class="o">,</span> <span class="nc">StringSerializer</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span> <span class="c1">// Specify key serializer</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"value.serializer"</span><span class="o">,</span> <span class="nc">StringSerializer</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span> <span class="c1">// Specify value serializer</span>
        <span class="n">props</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"acks"</span><span class="o">,</span> <span class="s">"all"</span><span class="o">);</span> <span class="c1">// Ensure reliability, all replicas confirm</span>
        <span class="k">this</span><span class="o">.</span><span class="na">producer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KafkaProducer</span><span class="o">&lt;&gt;(</span><span class="n">props</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Process send request, generate message_id, and route to Kafka.
     *
     * @param request Send request body.
     * @return messageId.
     */</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">routeNotification</span><span class="o">(</span><span class="nc">NotificationRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">messageId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span> <span class="c1">// Use UUID to generate unique ID</span>
            <span class="nc">NotificationMessage</span> <span class="n">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NotificationMessage</span><span class="o">(</span><span class="n">messageId</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getUserId</span><span class="o">(),</span> <span class="n">request</span><span class="o">.</span><span class="na">getTypes</span><span class="o">(),</span> <span class="n">request</span><span class="o">.</span><span class="na">getContent</span><span class="o">(),</span> <span class="n">request</span><span class="o">.</span><span class="na">getPriority</span><span class="o">());</span> <span class="c1">// Create notification message object</span>
            <span class="nc">String</span> <span class="n">json</span> <span class="o">=</span> <span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span> <span class="c1">// Convert message to JSON</span>
            <span class="nc">String</span> <span class="n">topic</span> <span class="o">=</span> <span class="n">determineTopic</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getTypes</span><span class="o">());</span> <span class="c1">// Determine Kafka topic</span>
            <span class="n">producer</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="k">new</span> <span class="nc">ProducerRecord</span><span class="o">&lt;&gt;(</span><span class="n">topic</span><span class="o">,</span> <span class="n">json</span><span class="o">));</span> <span class="c1">// Send message to Kafka</span>
            <span class="k">return</span> <span class="n">messageId</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Failed to route notification"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span> <span class="c1">// Handle exception</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="nf">determineTopic</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">types</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Logic: Route by primary type or mixed Topic</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">types</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"push"</span><span class="o">))</span> <span class="k">return</span> <span class="s">"push-topic"</span><span class="o">;</span> <span class="c1">// If contains push type, return push topic</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">types</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"sms"</span><span class="o">))</span> <span class="k">return</span> <span class="s">"sms-topic"</span><span class="o">;</span> <span class="c1">// If contains SMS type, return SMS topic</span>
        <span class="k">return</span> <span class="s">"email-topic"</span><span class="o">;</span> <span class="c1">// Default return email topic</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Data Class: Notification Message</span>
<span class="kd">class</span> <span class="nc">NotificationMessage</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">messageId</span><span class="o">;</span> <span class="c1">// Message ID</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">userId</span><span class="o">;</span> <span class="c1">// User ID</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">types</span><span class="o">;</span> <span class="c1">// Notification type list</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">content</span><span class="o">;</span> <span class="c1">// Notification content</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">priority</span><span class="o">;</span> <span class="c1">// Priority</span>

    <span class="kd">public</span> <span class="nf">NotificationMessage</span><span class="o">(</span><span class="nc">String</span> <span class="n">messageId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">userId</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">types</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">content</span><span class="o">,</span> <span class="nc">String</span> <span class="n">priority</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">messageId</span> <span class="o">=</span> <span class="n">messageId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">types</span> <span class="o">=</span> <span class="n">types</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">priority</span> <span class="o">=</span> <span class="n">priority</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Request Data Class: Send Request</span>
<span class="kd">class</span> <span class="nc">NotificationRequest</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">userId</span><span class="o">;</span> <span class="c1">// User ID</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">types</span><span class="o">;</span> <span class="c1">// Notification types</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">content</span><span class="o">;</span> <span class="c1">// Content</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">priority</span><span class="o">;</span> <span class="c1">// Priority</span>

    <span class="c1">// Getters...</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">userId</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getTypes</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">types</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">getContent</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">content</span><span class="o">;</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPriority</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">priority</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Sequence Diagram</strong>:</p> <pre><code class="language-mermaid">sequenceDiagram
    participant B as Business Side
    participant A as API Gateway
    participant R as Routing Engine
    participant K as Kafka
    participant W as Worker
    participant T as Third-Party
    participant E as Elasticsearch
    B-&gt;&gt;A: POST /send
    A-&gt;&gt;R: Forward
    R-&gt;&gt;K: Write to Topic
    K-&gt;&gt;W: Consume
    W-&gt;&gt;W: Check Unsubscribe/Token
    W-&gt;&gt;T: Send
    T--&gt;&gt;W: Result
    W-&gt;&gt;E: Record Log
    W-&gt;&gt;K: Commit Offset
</code></pre> <h3 id="42-unsubscribe-process">4.2. Unsubscribe Process</h3> <p><strong>Process Steps</strong>:</p> <ol> <li> <strong>User Request</strong>: Invoke unsubscribe API.</li> <li> <strong>Update Database</strong>: MySQL insert/update unsubscribe record.</li> <li> <strong>Sync Cache</strong>: Canal listens to Binlog and updates Redis.</li> <li> <strong>Effectiveness</strong>: Worker queries Redis to skip unsubscribed.</li> </ol> <p><strong>Distributed Transaction Trade-offs</strong>: Unsubscribe involves MySQL→Canal→Redis data flow, using eventual consistency to avoid distributed transaction overhead (e.g., 2 PC increases latency by 20-50% and reduces availability). Failure rollback: If Canal sync fails, use retry queue (Kafka DLQ) for resync; in extreme cases, Worker fallback to MySQL (increases read load by 5%). Trade-off: Sacrifice brief inconsistency (&lt;1 s) for high availability; if strong consistency needed, introduce Seata distributed transactions, but increases complexity and may impact QPS.</p> <p><strong>Java Code Example (Unsubscribe Service)</strong>:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.notification</span><span class="o">;</span>

<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Springframework</span><span class="o">.</span> <span class="nc">Jdbc</span><span class="o">.</span> <span class="nc">Core</span><span class="o">.</span> <span class="nc">JdbcTemplate</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">redis</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">;</span>

<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">List</span><span class="o">;</span>

<span class="cm">/**
 * Unsubscribe Service
 * Handles unsubscribe requests and syncs to cache.
 */</span>
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">UnsubscribeService</span> <span class="o">{</span>

    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span> <span class="c1">// JDBC template for database operations</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">;</span> <span class="c1">// Redis client for cache operations</span>

    <span class="nc">Public</span> <span class="nf">UnsubscribeService</span> <span class="o">(</span><span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">,</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">JdbcTemplate</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Jedis</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Process unsubscribe request, update MySQL and asynchronously sync Redis.
     *
     * @param userId User ID.
     * @param types Unsubscribe type list.
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unsubscribe</span> <span class="o">(</span><span class="nc">String</span> <span class="n">userId</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">types</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Try</span> <span class="o">{</span>
            <span class="nc">For</span> <span class="o">(</span><span class="nc">String</span> <span class="n">type</span> <span class="o">:</span> <span class="n">types</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// Traverse each unsubscribe type</span>
                <span class="nc">JdbcTemplate</span><span class="o">.</span><span class="na">Update</span> <span class="o">(</span><span class="s">"INSERT INTO unsubscriptions (user_id, notification_type, is_unsubscribed) VALUES (?, ?, true) "</span> <span class="o">+</span>
                           <span class="s">"ON DUPLICATE KEY UPDATE is_unsubscribed = true"</span><span class="o">,</span> <span class="n">userId</span><span class="o">,</span> <span class="n">type</span><span class="o">);</span> <span class="c1">// Update or insert database record</span>
            <span class="o">}</span>
            <span class="c1">// Canal will asynchronously update Redis, but can immediately publish event to accelerate sync</span>
            <span class="nc">Jedis</span><span class="o">.</span><span class="na">Publish</span> <span class="o">(</span><span class="s">"unsubscribe_channel"</span><span class="o">,</span> <span class="n">userId</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="nc">String</span><span class="o">.</span><span class="na">Join</span> <span class="o">(</span><span class="s">","</span><span class="o">,</span> <span class="n">types</span><span class="o">));</span> <span class="c1">// Publish event to Redis channel</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span> <span class="o">(</span><span class="s">"Failed to unsubscribe"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span> <span class="c1">// Handle exception</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Sequence Diagram</strong>:</p> <pre><code class="language-mermaid">sequenceDiagram
    Participant U as User
    Participant A as API
    Participant M as MySQL
    Participant C as Canal
    Participant R as Redis
    Participant W as Worker
    U-&gt;&gt;A: Unsubscribe Request
    A-&gt;&gt;M: Update Record
    M-&gt;&gt;C: Binlog Event
    C-&gt;&gt;R: Sync to Cache
    W-&gt;&gt;R: Query Subscription
    Alt Unsubscribed
        W-&gt;&gt;Log: Skip Send
    Else Subscribed
        W-&gt;&gt;Third-Party: Proceed Send
    End
</code></pre> <h3 id="43-third-party-call-process">4.3. Third-Party Call Process</h3> <p><strong>Process Steps</strong>:</p> <ol> <li> <strong>Worker Consumption</strong>: Retrieve notification.</li> <li> <strong>Adapter Selection</strong>: Route based on configuration.</li> <li> <strong>Call</strong>: HTTP send with retry mechanism.</li> <li> <strong>Feedback</strong>: Webhook updates status.</li> </ol> <p><strong>Java Code Example (APNs Adapter)</strong>:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>

<span class="nc">Import</span> <span class="n">software</span><span class="o">.</span> <span class="nc">Amazon</span><span class="o">.</span> <span class="nc">Awssdk</span><span class="o">.</span> <span class="nc">Services</span><span class="o">.</span> <span class="nc">Apns</span><span class="o">.</span> <span class="nc">ApnsClient</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">software</span><span class="o">.</span> <span class="nc">Amazon</span><span class="o">.</span> <span class="nc">Awssdk</span><span class="o">.</span> <span class="nc">Services</span><span class="o">.</span> <span class="nc">Apns</span><span class="o">.</span> <span class="nc">Model</span><span class="o">.</span> <span class="nc">SendNotificationRequest</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">software</span><span class="o">.</span> <span class="nc">Amazon</span><span class="o">.</span> <span class="nc">Awssdk</span><span class="o">.</span> <span class="nc">Services</span><span class="o">.</span> <span class="nc">Apns</span><span class="o">.</span> <span class="nc">Model</span><span class="o">.</span> <span class="nc">SendNotificationResponse</span><span class="o">;</span>

<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Map</span><span class="o">;</span>

<span class="cm">/**
 * APNs Adapter
 * Encapsulates push logic.
 */</span>
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">ApnsAdapter</span> <span class="o">{</span>

    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">ApnsClient</span> <span class="n">client</span><span class="o">;</span> <span class="c1">// APNs client instance</span>

    <span class="nc">Public</span> <span class="nf">ApnsAdapter</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Client</span> <span class="o">=</span> <span class="nc">ApnsClient</span><span class="o">.</span><span class="na">Create</span> <span class="o">();</span> <span class="c1">// Create APNs client</span>
    <span class="o">}</span>

    <span class="cm">/**
     * Send push notification.
     *
     * @param token Device token.
     * @param payload Payload.
     * @return Status code.
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">sendPush</span> <span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">payload</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Try</span> <span class="o">{</span>
            <span class="nc">SendNotificationRequest</span> <span class="n">req</span> <span class="o">=</span> <span class="nc">SendNotificationRequest</span><span class="o">.</span><span class="na">Builder</span> <span class="o">()</span>
                    <span class="o">.</span><span class="na">token</span> <span class="o">(</span><span class="n">token</span><span class="o">)</span> <span class="c1">// Set device token</span>
                    <span class="o">.</span><span class="na">payload</span> <span class="o">(</span><span class="n">payload</span><span class="o">)</span> <span class="c1">// Set push payload</span>
                    <span class="o">.</span><span class="na">build</span> <span class="o">();</span> <span class="c1">// Build request</span>
            <span class="nc">SendNotificationResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">SendNotification</span> <span class="o">(</span><span class="n">req</span><span class="o">);</span> <span class="c1">// Send notification</span>
            <span class="nc">Return</span> <span class="n">response</span><span class="o">.</span><span class="na">SdkHttpResponse</span> <span class="o">().</span> <span class="nc">StatusCode</span> <span class="o">();</span> <span class="c1">// Return HTTP status code</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">If</span> <span class="o">(</span><span class="n">e</span> <span class="k">instanceof</span> <span class="n">software</span><span class="o">.</span> <span class="nc">Amazon</span><span class="o">.</span> <span class="nc">Awssdk</span><span class="o">.</span> <span class="nc">Services</span><span class="o">.</span> <span class="nc">Apns</span><span class="o">.</span> <span class="nc">Model</span><span class="o">.</span> <span class="nc">ApnsException</span> <span class="o">&amp;&amp;</span> <span class="o">((</span><span class="n">software</span><span class="o">.</span> <span class="nc">Amazon</span><span class="o">.</span> <span class="nc">Awssdk</span><span class="o">.</span> <span class="nc">Services</span><span class="o">.</span> <span class="nc">Apns</span><span class="o">.</span> <span class="nc">Model</span><span class="o">.</span> <span class="nc">ApnsException</span><span class="o">)</span> <span class="n">e</span><span class="o">).</span> <span class="nc">StatusCode</span> <span class="o">()</span> <span class="o">==</span> <span class="mi">410</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">MarkInvalidToken</span> <span class="o">(</span><span class="n">token</span><span class="o">);</span> <span class="c1">// If token invalid, mark as invalid</span>
            <span class="o">}</span>
            <span class="nc">Throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span> <span class="o">(</span><span class="s">"APNs send failed"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span> <span class="c1">// Handle exception</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nc">Private</span> <span class="kt">void</span> <span class="nf">markInvalidToken</span> <span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Update MySQL/Redis, mark token as invalid</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Sequence Diagram</strong>:</p> <pre><code class="language-mermaid">sequenceDiagram
    Participant W as Worker
    Participant A as Adapter
    Participant T as Third-Party
    Participant E as Elasticsearch
    W-&gt;&gt;A: Send Request
    A-&gt;&gt;T: API Call
    T--&gt;&gt;A: Response
    Alt Success
        A--&gt;&gt;W: OK
        W-&gt;&gt;E: Log Success
    Else Failure
        A--&gt;&gt;W: Error
        W-&gt;&gt;W: Retry/DLQ
        W-&gt;&gt;E: Log Failure
    End
</code></pre> <hr> <h2 id="5-data-model-design">5. Data Model Design</h2> <h3 id="51-database-selection">5.1. Database Selection</h3> <table> <thead> <tr> <th style="text-align: left">Data Type</th> <th style="text-align: left">Selection</th> <th style="text-align: left">Rationale</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>User Unsubscribes, Configurations</strong></td> <td style="text-align: left"><strong>MySQL</strong></td> <td style="text-align: left">Strong consistency, transaction support, structured data.</td> </tr> <tr> <td style="text-align: left"><strong>Notification Logs</strong></td> <td style="text-align: left"><strong>Elasticsearch</strong></td> <td style="text-align: left">High write throughput, full-text search, aggregation analysis.</td> </tr> <tr> <td style="text-align: left"><strong>Cache (Unsubscribes/Tokens)</strong></td> <td style="text-align: left"><strong>Redis</strong></td> <td style="text-align: left">In-memory speed, low-latency reads.</td> </tr> <tr> <td style="text-align: left"><strong>Queue</strong></td> <td style="text-align: left"><strong>Kafka</strong></td> <td style="text-align: left">High throughput, persistence, partition expansion.</td> </tr> </tbody> </table> <h3 id="52-table-structure-design-sql">5.2. Table Structure Design (SQL)</h3> <p><strong>MySQL (Unsubscribes &amp; Configurations)</strong>:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">unsubscriptions</span> <span class="p">(</span>
    <span class="n">User_id</span> <span class="nb">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Notification_type</span> <span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Is_unsubscribed</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
    <span class="n">Updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">notification_type</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">notification_configs</span> <span class="p">(</span>
    <span class="n">Config_id</span> <span class="nb">INT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">Provider</span> <span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Api_key</span> <span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span>
<span class="p">);</span>
</code></pre></div></div> <p><strong>Elasticsearch (Notification Logs)</strong>:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"message_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">},</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">},</span><span class="w">
      </span><span class="nl">"notification_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">},</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keyword"</span><span class="p">},</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <hr> <h2 id="6-system-scalability-design">6. System Scalability Design</h2> <p>To support large-scale expansion, adopt stateless services and distributed components.</p> <ol> <li> <strong>Stateless Services</strong>: API Gateway and Workers are stateless, with Kubernetes HPA auto-scaling based on CPU &gt;70%.</li> <li> <strong>Database Scaling</strong>: <ul> <li> <strong>MySQL</strong>: Read-write separation, master for writes, replicas for reads; horizontal sharding (by user_id hash using Vitess).</li> <li> <strong>Kafka</strong>: Dynamic partition expansion (from 5 to 100), multi-broker cluster. Rebalance impact analysis: Partition reassignment may cause brief consumption interruptions (&lt;10 s), increasing business latency by 5-10%; trade-off: Use Kafka’s incremental rebalance protocol to minimize interruptions, monitor lag and execute during low-peak periods.</li> <li> <strong>Redis</strong>: Cluster mode for sharding data.</li> </ul> </li> <li> <strong>Cache Scaling</strong>: Redis Sentinel for high availability, Cluster for sharding.</li> </ol> <h3 id="sharding-strategy-comparison">Sharding Strategy Comparison</h3> <table> <thead> <tr> <th style="text-align: left">Sharding Strategy</th> <th style="text-align: left">Advantages</th> <th style="text-align: left">Disadvantages</th> <th style="text-align: left">Applicable Scenarios</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>By user_id Hash</strong></td> <td style="text-align: left">- Data aggregation, efficient user queries.<br>- Load balancing.</td> <td style="text-align: left">- Hotspots for popular users.<br>- Complex cross-user queries.</td> <td style="text-align: left">User unsubscribes, token management (<strong>Recommended</strong>).</td> </tr> <tr> <td style="text-align: left"><strong>By Time</strong></td> <td style="text-align: left">- Fast time-based queries.<br>- Easy archiving.</td> <td style="text-align: left">- Hotspots for new data.<br>- Idle old data.</td> <td style="text-align: left">Log recording.</td> </tr> <tr> <td style="text-align: left"><strong>By Type</strong></td> <td style="text-align: left">- Type isolation.<br>- Simple expansion.</td> <td style="text-align: left">- Uneven types.<br>- Multi-shard for mixed queries.</td> <td style="text-align: left">Queue Topic separation.</td> </tr> </tbody> </table> <hr> <h2 id="7-availability-and-fault-tolerance">7. Availability and Fault Tolerance</h2> <table> <thead> <tr> <th style="text-align: left">Fault Tolerance Aspect</th> <th style="text-align: left">Strategy</th> <th style="text-align: left">Technologies/Tools</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>Service Failures</strong></td> <td style="text-align: left">Auto-restart, multi-AZ deployment</td> <td style="text-align: left">Kubernetes, EC 2 Auto Scaling</td> </tr> <tr> <td style="text-align: left"><strong>Database Failures</strong></td> <td style="text-align: left">Master-slave replication, auto-failover</td> <td style="text-align: left">MySQL + Vitess, RDS Multi-AZ</td> </tr> <tr> <td style="text-align: left"><strong>Third-Party Failures</strong></td> <td style="text-align: left">Circuit breaking, provider switching</td> <td style="text-align: left">Hystrix, weighted routing</td> </tr> <tr> <td style="text-align: left"><strong>Queue Failures</strong></td> <td style="text-align: left">Multi-replicas, lag monitoring</td> <td style="text-align: left">Kafka Replication Factor=3</td> </tr> <tr> <td style="text-align: left"><strong>Cascading Failures</strong></td> <td style="text-align: left">Rate limiting, exponential backoff retries</td> <td style="text-align: left">Sentinel, Resilience 4 j</td> </tr> <tr> <td style="text-align: left"><strong>Data Loss</strong></td> <td style="text-align: left">Snapshots, Binlog recovery</td> <td style="text-align: left">AWS Backup, S 3 Versioning</td> </tr> <tr> <td style="text-align: left"><strong>Graceful Degradation</strong></td> <td style="text-align: left">Prioritize core notifications, delay non-critical</td> <td style="text-align: left">Priority queues, feature toggles</td> </tr> </tbody> </table> <hr> <h2 id="8-bottleneck-analysis-and-optimization">8. Bottleneck Analysis and Optimization</h2> <p>This section analyzes key bottlenecks in the notification system, including causes, impacts, comparisons, and solutions for each. The analysis is based on capacity estimates (daily 35 GB storage, 659 QPS) and architecture design (e.g., asynchronous queues, sharding), providing comprehensive optimization guidance. Recommended solutions for each bottleneck include implementation details, expected effects, and trade-offs, with Java code examples.</p> <h3 id="81-high-concurrency-push-bottleneck">8.1. High-Concurrency Push Bottleneck</h3> <h4 id="causes">Causes</h4> <p>Peak push QPS &gt;1977, Kafka consumption lag; third-party rate limiting (e.g., APNs connection pool full); network fluctuations leading to retry failures; Worker thread contention.</p> <h4 id="impacts">Impacts</h4> <p>Latency &gt;2 seconds, user complaints increase by 20%; resource CPU &gt;90%, costs rise by 30%; delivery rate drops &lt;99%.</p> <h4 id="comparison">Comparison</h4> <table> <thead> <tr> <th>Strategy/Solution</th> <th>Advantages</th> <th>Disadvantages</th> </tr> </thead> <tbody> <tr> <td><strong>Single Queue</strong></td> <td>- Simple implementation.</td> <td>- No priority, verification codes block marketing.</td> </tr> <tr> <td><strong>Multi-Partition Queue</strong></td> <td>- Parallel consumption, high throughput.</td> <td>- Complex configuration, uneven partitions.</td> </tr> <tr> <td><strong>Token Bucket Rate Limiting</strong></td> <td>- Smooth traffic, prevent third-party overload.</td> <td>- Risk of high-priority starvation.</td> </tr> </tbody> </table> <h4 id="solutions">Solutions</h4> <ul> <li> <strong>Multiple Methods</strong>: <ol> <li> <strong>Partition Expansion</strong>: Dynamically increase Kafka partitions.</li> <li> <strong>Worker Optimization</strong>: Multi-threaded consumption.</li> <li> <strong>Worker Rate Limiting</strong>: Redis token bucket.</li> </ol> </li> <li> <strong>Recommended Solution</strong>: Multi-partition Kafka combined with token bucket rate limiting. Implementation details are listed below by steps, including specific operations, tool configurations, potential challenges, and handling methods. Code examples are provided separately: <ol> <li> <p><strong>Kafka Partition Configuration</strong>: Initial 5 partitions, dynamically increase based on QPS (AdminClient createPartitions). Challenge: Node rebalancing interruptions; Handling: Monitor rebalancing time &lt;10 s.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Apache</span><span class="o">.</span> <span class="nc">Kafka</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Admin</span><span class="o">.</span> <span class="nc">AdminClient</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Apache</span><span class="o">.</span> <span class="nc">Kafka</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Admin</span><span class="o">.</span> <span class="nc">NewPartitions</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Collections</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Properties</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">KafkaAdmin</span> <span class="o">{</span>
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">increasePartitions</span> <span class="o">(</span><span class="nc">String</span> <span class="n">topic</span><span class="o">,</span> <span class="kt">int</span> <span class="n">newPartitions</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Properties</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span> <span class="o">();</span>
        <span class="nc">Props</span><span class="o">.</span><span class="na">Put</span> <span class="o">(</span><span class="s">"bootstrap. Servers"</span><span class="o">,</span> <span class="s">"kafka: 9092"</span><span class="o">);</span> <span class="c1">// Configure Kafka broker address</span>
        <span class="nc">Try</span> <span class="o">(</span><span class="nc">AdminClient</span> <span class="n">admin</span> <span class="o">=</span> <span class="nc">AdminClient</span><span class="o">.</span><span class="na">Create</span> <span class="o">(</span><span class="n">props</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// Create AdminClient</span>
            <span class="nc">NewPartitions</span> <span class="n">newParts</span> <span class="o">=</span> <span class="nc">NewPartitions</span><span class="o">.</span><span class="na">IncreaseTo</span> <span class="o">(</span><span class="n">newPartitions</span><span class="o">);</span> <span class="c1">// Create new partition config</span>
            <span class="nc">Admin</span><span class="o">.</span><span class="na">CreatePartitions</span> <span class="o">(</span><span class="nc">Collections</span><span class="o">.</span><span class="na">SingletonMap</span> <span class="o">(</span><span class="n">topic</span><span class="o">,</span> <span class="n">newParts</span><span class="o">));</span> <span class="c1">// Apply partition increase</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span> <span class="o">(</span><span class="s">"Failed to increase partitions"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span> <span class="c1">// Handle exception</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Worker Multi-Threaded Consumption</strong>: Each Worker with 10 threads consuming partitions. Challenge: Thread contention; Handling: Thread pool limit of 20.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Concurrent</span><span class="o">.</span> <span class="nc">ExecutorService</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Concurrent</span><span class="o">.</span> <span class="nc">Executors</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">WorkerManager</span> <span class="o">{</span>
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">startConsumers</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">ExecutorService</span> <span class="n">executor</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">NewFixedThreadPool</span> <span class="o">(</span><span class="mi">10</span><span class="o">);</span> <span class="c1">// Create fixed-size thread pool</span>
        <span class="nc">For</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span> <span class="c1">// Start 10 consumption threads</span>
            <span class="nc">Executor</span><span class="o">.</span><span class="na">Submit</span> <span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">consumePartition</span><span class="o">);</span> <span class="c1">// Submit consumption task</span>
        <span class="o">}</span>
    <span class="o">}</span>
  
    <span class="nc">Private</span> <span class="kt">void</span> <span class="nf">consumePartition</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Consumption logic... // Implement Kafka partition consumption code here</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Token Bucket Rate Limiting Integration</strong>: Redis Lua script for token bucket. Challenge: Distributed consistency; Handling: Single-point Redis.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">redis</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">RateLimiter</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">;</span> <span class="c1">// Redis client</span>
  
    <span class="nc">Public</span> <span class="nf">RateLimiter</span> <span class="o">(</span><span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Jedis</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="nc">Public</span> <span class="kt">boolean</span> <span class="nf">acquireToken</span> <span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tokens</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Lua script: Check and deduct tokens</span>
        <span class="nc">String</span> <span class="n">lua</span> <span class="o">=</span> <span class="s">"local current = redis.Call ('get', KEYS[1]) "</span> <span class="o">+</span>
                     <span class="s">"if current and tonumber (current) &gt;= tonumber (ARGV[1]) then "</span> <span class="o">+</span>
                     <span class="s">"redis.Call ('decrby', KEYS[1], ARGV[1]) return 1 else return 0 end"</span><span class="o">;</span>
        <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">.</span><span class="na">Eval</span> <span class="o">(</span><span class="n">lua</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">ValueOf</span> <span class="o">(</span><span class="n">tokens</span><span class="o">));</span> <span class="c1">// Execute Lua script</span>
        <span class="nc">Return</span> <span class="s">"1"</span><span class="o">.</span><span class="na">Equals</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">ToString</span> <span class="o">());</span> <span class="c1">// Return if acquired successfully</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Monitoring and Scaling</strong>: Prometheus tracks Lag &gt;1000 alerts, HPA scales Workers.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">Monitor</span> <span class="o">{</span>
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">checkLag</span> <span class="o">(</span><span class="kt">long</span> <span class="n">lag</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">If</span> <span class="o">(</span><span class="n">lag</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// Check if lag exceeds threshold</span>
            <span class="c1">// Trigger scaling logic</span>
            <span class="nc">ScaleUpWorkers</span> <span class="o">();</span> <span class="c1">// Call scaling method</span>
        <span class="o">}</span>
    <span class="o">}</span>
  
    <span class="nc">Private</span> <span class="kt">void</span> <span class="nf">scaleUpWorkers</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Call Kubernetes API for scaling // Implement Kubernetes HPA scaling call here</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Testing</strong>: Use Locust to simulate 2000 QPS.</p> </li> </ol> <p>Expected Effects: QPS &gt;2000, latency &lt;1.5 seconds. Trade-off: Increased partition complexity, but good scalability.</p> </li> </ul> <h3 id="82-third-party-service-failure-bottleneck">8.2. Third-Party Service Failure Bottleneck</h3> <h4 id="causes-1">Causes</h4> <p>Third-party rate limiting/downtime; API timeouts; accumulation of invalid tokens.</p> <h4 id="impacts-1">Impacts</h4> <p>Delivery rate &lt;99%, retry resource waste 40%; poor user experience.</p> <h4 id="comparison-1">Comparison</h4> <table> <thead> <tr> <th>Solution</th> <th>Advantages</th> <th>Disadvantages</th> </tr> </thead> <tbody> <tr> <td><strong>Single Provider</strong></td> <td>- Simple integration.</td> <td>- Single point of failure.</td> </tr> <tr> <td><strong>Multi-Provider Routing</strong></td> <td>- Failover.</td> <td>- Complex configuration.</td> </tr> <tr> <td><strong>Circuit Breaker</strong></td> <td>- Quick isolation.</td> <td>- Manual recovery needed.</td> </tr> </tbody> </table> <h4 id="solutions-1">Solutions</h4> <ul> <li> <strong>Multiple Methods</strong>: <ol> <li> <strong>Multi-Providers</strong>: Weighted routing.</li> <li> <strong>Circuit Breaking</strong>: Hystrix.</li> <li> <strong>Token Cleanup</strong>: Daily tasks.</li> </ol> </li> <li> <strong>Recommended Solution</strong>: Multi-provider weighted routing combined with circuit breaker. Implementation details are listed below by steps, including specific operations, tool configurations, potential challenges, and handling methods. Code examples are provided separately: <ol> <li> <p><strong>Provider Configuration</strong>: Nacos stores weights (e.g., Twilio 70%, Aliyun 30%). Challenge: Weight tuning; Handling: Dynamically adjust based on success rates.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Map</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Random</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">ProviderRouter</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">providers</span><span class="o">;</span> <span class="c1">// Provider weights loaded from Nacos</span>
  
    <span class="nc">Public</span> <span class="nc">String</span> <span class="nf">selectProvider</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">Int</span> <span class="n">totalWeight</span> <span class="o">=</span> <span class="n">providers</span><span class="o">.</span><span class="na">Values</span> <span class="o">().</span> <span class="nc">Stream</span> <span class="o">().</span> <span class="nc">MapToInt</span> <span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">intValue</span><span class="o">).</span> <span class="nc">Sum</span> <span class="o">();</span> <span class="c1">// Calculate total weight</span>
        <span class="nc">Int</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span> <span class="o">().</span> <span class="nc">NextInt</span> <span class="o">(</span><span class="n">totalWeight</span><span class="o">);</span> <span class="c1">// Generate random number</span>
        <span class="nc">Int</span> <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span> <span class="nc">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">providers</span><span class="o">.</span><span class="na">EntrySet</span> <span class="o">())</span> <span class="o">{</span> <span class="c1">// Traverse providers</span>
            <span class="nc">Current</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">GetValue</span> <span class="o">();</span> <span class="c1">// Accumulate weight</span>
            <span class="nc">If</span> <span class="o">(</span><span class="n">random</span> <span class="o">&lt;</span> <span class="n">current</span><span class="o">)</span> <span class="k">return</span> <span class="n">entry</span><span class="o">.</span><span class="na">GetKey</span> <span class="o">();</span> <span class="c1">// Select provider based on random</span>
        <span class="o">}</span>
        <span class="nc">Return</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// Return null if not found</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Circuit Breaker Integration</strong>: Wrap calls with HystrixCommand, timeout 2 s for breaking. Challenge: False positives; Handling: Threshold 10% failure rate.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Netflix</span><span class="o">.</span> <span class="nc">Hystrix</span><span class="o">.</span> <span class="nc">HystrixCommand</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Netflix</span><span class="o">.</span> <span class="nc">Hystrix</span><span class="o">.</span> <span class="nc">HystrixCommandGroupKey</span><span class="o">;</span>
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendCommand</span> <span class="kd">extends</span> <span class="nc">HystrixCommand</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">Protected</span> <span class="nf">SendCommand</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">Super</span> <span class="o">(</span><span class="nc">HystrixCommandGroupKey</span><span class="o">.</span><span class="na">Factory</span><span class="o">.</span><span class="na">AsKey</span> <span class="o">(</span><span class="s">"SendGroup"</span><span class="o">));</span> <span class="c1">// Set Hystrix group key</span>
    <span class="o">}</span>
  
    <span class="nd">@Override</span>
    <span class="nc">Protected</span> <span class="nc">Integer</span> <span class="nf">run</span> <span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">// Send logic</span>
        <span class="nc">Return</span> <span class="nf">sendToProvider</span> <span class="o">();</span> <span class="c1">// Execute actual send</span>
    <span class="o">}</span>
  
    <span class="nd">@Override</span>
    <span class="nc">Protected</span> <span class="nc">Integer</span> <span class="nf">getFallback</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">Return</span> <span class="nf">switchProvider</span> <span class="o">();</span> <span class="c1">// Switch provider on circuit break</span>
    <span class="o">}</span>
  
    <span class="nc">Private</span> <span class="kt">int</span> <span class="nf">sendToProvider</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Actual send // Implement third-party API call here</span>
        <span class="nc">Return</span> <span class="mi">200</span><span class="o">;</span> <span class="c1">// Return success code</span>
    <span class="o">}</span>
  
    <span class="nc">Private</span> <span class="kt">int</span> <span class="nf">switchProvider</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Switch provider // Implement fallback provider logic here</span>
        <span class="nc">Return</span> <span class="mi">200</span><span class="o">;</span> <span class="c1">// Return success code</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Token Cleanup Task</strong>: Quartz daily scan for invalid tokens. Challenge: Slow scans; Handling: Batch deletion.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Springframework</span><span class="o">.</span> <span class="nc">Jdbc</span><span class="o">.</span> <span class="nc">Core</span><span class="o">.</span> <span class="nc">JdbcTemplate</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Util</span><span class="o">.</span> <span class="nc">Date</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">TokenCleaner</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span> <span class="c1">// JDBC template</span>
  
    <span class="nc">Public</span> <span class="nf">TokenCleaner</span> <span class="o">(</span><span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">JdbcTemplate</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">cleanInvalidTokens</span> <span class="o">(</span><span class="nc">Date</span> <span class="n">oldDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">JdbcTemplate</span><span class="o">.</span><span class="na">BatchUpdate</span> <span class="o">(</span><span class="s">"DELETE FROM invalid_tokens WHERE invalidated_at &lt; ?"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="n">oldDate</span><span class="o">});</span> <span class="c1">// Batch delete invalid tokens</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Webhook Feedback</strong>: Parse status and update ES.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Springframework</span><span class="o">.</span> <span class="nc">Web</span><span class="o">.</span> <span class="nc">Bind</span><span class="o">.</span> <span class="nc">Annotation</span><span class="o">.</span> <span class="nc">PostMapping</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">WebhookController</span> <span class="o">{</span>
    <span class="nd">@PostMapping</span> <span class="o">(</span><span class="s">"/webhook"</span><span class="o">)</span> <span class="c1">// Handle Webhook POST request</span>
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">handleWebhook</span> <span class="o">(</span><span class="nc">WebhookPayload</span> <span class="n">payload</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// esClient.UpdateStatus (payload.GetMessageId (), payload.GetStatus ()); // Update Elasticsearch status</span>
    <span class="o">}</span>
<span class="o">}</span>
  
<span class="nc">Class</span> <span class="nc">WebhookPayload</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="nc">String</span> <span class="n">messageId</span><span class="o">;</span> <span class="c1">// Message ID</span>
    <span class="nc">Private</span> <span class="nc">String</span> <span class="n">status</span><span class="o">;</span> <span class="c1">// Status</span>
  
    <span class="c1">// Getters...</span>
    <span class="nc">Public</span> <span class="nc">String</span> <span class="nf">getMessageId</span> <span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">messageId</span><span class="o">;</span> <span class="o">}</span>
    <span class="nc">Public</span> <span class="nc">String</span> <span class="nf">getStatus</span> <span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">status</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Monitoring</strong>: Grafana tracks switch rate &gt;5% alerts.</p> </li> </ol> <p>Expected Effects: Availability &gt;99.99%, seamless switching. Trade-off: Multi-integration complexity, but high reliability.</p> </li> </ul> <h3 id="83-unsubscribe-consistency-bottleneck">8.3. Unsubscribe Consistency Bottleneck</h3> <h4 id="causes-2">Causes</h4> <p>Database update and cache sync delays; slow high-concurrency unsubscribe queries; cross-service consistency.</p> <h4 id="impacts-2">Impacts</h4> <p>Mis-delivery rate &gt;1%, privacy risks; query latency &gt;200 ms.</p> <h4 id="comparison-2">Comparison</h4> <table> <thead> <tr> <th>Solution</th> <th>Advantages</th> <th>Disadvantages</th> </tr> </thead> <tbody> <tr> <td><strong>Direct Cache Write</strong></td> <td>- Real-time.</td> <td>- Weak consistency.</td> </tr> <tr> <td><strong>Binlog Sync</strong></td> <td>- Reliable.</td> <td>- Second-level latency.</td> </tr> <tr> <td><strong>Eventual Consistency</strong></td> <td>- High performance.</td> <td>- Brief inaccuracies.</td> </tr> </tbody> </table> <h4 id="solutions-2">Solutions</h4> <ul> <li> <strong>Multiple Methods</strong>: <ol> <li> <strong>Canal Sync</strong>.</li> <li> <strong>TTL Cache</strong>.</li> <li> <strong>Query Merging</strong>.</li> </ol> </li> <li> <strong>Recommended Solution</strong>: Canal Binlog sync combined with TTL cache. Implementation details are listed below by steps, including specific operations, tool configurations, potential challenges, and handling methods. Code examples are provided separately: <ol> <li> <p><strong>Canal Configuration</strong>: Listen to MySQL Binlog, filter unsubscriptions table. Challenge: Slow Binlog parsing; Handling: Incremental sync.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Alibaba</span><span class="o">.</span> <span class="nc">Otter</span><span class="o">.</span> <span class="nc">Canal</span><span class="o">.</span> <span class="nc">Client</span><span class="o">.</span> <span class="nc">CanalConnector</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Alibaba</span><span class="o">.</span> <span class="nc">Otter</span><span class="o">.</span> <span class="nc">Canal</span><span class="o">.</span> <span class="nc">Client</span><span class="o">.</span> <span class="nc">CanalConnectors</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">java</span><span class="o">.</span> <span class="nc">Net</span><span class="o">.</span> <span class="nc">InetSocketAddress</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">CanalClient</span> <span class="o">{</span>
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">start</span> <span class="o">()</span> <span class="o">{</span>
        <span class="nc">CanalConnector</span> <span class="n">connector</span> <span class="o">=</span> <span class="nc">CanalConnectors</span><span class="o">.</span><span class="na">NewSingleConnector</span> <span class="o">(</span><span class="k">new</span> <span class="nc">InetSocketAddress</span> <span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">11111</span><span class="o">),</span> <span class="s">"example"</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span> <span class="c1">// Create Canal connector</span>
        <span class="nc">Connector</span><span class="o">.</span><span class="na">Connect</span> <span class="o">();</span> <span class="c1">// Connect to Canal server</span>
        <span class="nc">Connector</span><span class="o">.</span><span class="na">Subscribe</span> <span class="o">(</span><span class="s">"database. Unsubscriptions"</span><span class="o">);</span> <span class="c1">// Subscribe to database table</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Sync Logic</strong>: Parse events and update Redis. Challenge: Event loss; Handling: Reconnect mechanism.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Alibaba</span><span class="o">.</span> <span class="nc">Otter</span><span class="o">.</span> <span class="nc">Canal</span><span class="o">.</span> <span class="nc">Protocol</span><span class="o">.</span> <span class="nc">CanalEntry</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Alibaba</span><span class="o">.</span> <span class="nc">Otter</span><span class="o">.</span> <span class="nc">Canal</span><span class="o">.</span> <span class="nc">Protocol</span><span class="o">.</span> <span class="nc">Message</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">redis</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">CanalSync</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">;</span> <span class="c1">// Redis client</span>
  
    <span class="nc">Public</span> <span class="nf">CanalSync</span> <span class="o">(</span><span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Jedis</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">processMessage</span> <span class="o">(</span><span class="nc">Message</span> <span class="n">message</span><span class="o">,</span> <span class="nc">CanalConnector</span> <span class="n">connector</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">For</span> <span class="o">(</span><span class="nc">CanalEntry</span><span class="o">.</span> <span class="nc">Entry</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">message</span><span class="o">.</span><span class="na">GetEntries</span> <span class="o">())</span> <span class="o">{</span> <span class="c1">// Traverse Binlog events</span>
            <span class="c1">// Parse RowChange...</span>
            <span class="nc">CanalEntry</span><span class="o">.</span> <span class="nc">RowChange</span> <span class="n">rowChange</span> <span class="o">=</span> <span class="nc">CanalEntry</span><span class="o">.</span><span class="na">RowChange</span><span class="o">.</span><span class="na">ParseFrom</span> <span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">GetStoreValue</span> <span class="o">());</span> <span class="c1">// Parse row change</span>
            <span class="c1">// Assume extract userId and type</span>
            <span class="nc">String</span> <span class="n">userId</span> <span class="o">=</span> <span class="s">"extractedUserId"</span><span class="o">;</span> <span class="c1">// Extract user ID</span>
            <span class="nc">String</span> <span class="n">type</span> <span class="o">=</span> <span class="s">"extractedType"</span><span class="o">;</span> <span class="c1">// Extract type</span>
            <span class="nc">Jedis</span><span class="o">.</span><span class="na">Set</span> <span class="o">(</span><span class="s">"unsub: "</span> <span class="o">+</span> <span class="n">userId</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">type</span><span class="o">,</span> <span class="s">"true"</span><span class="o">);</span> <span class="c1">// Update Redis cache</span>
        <span class="o">}</span>
        <span class="nc">Connector</span><span class="o">.</span><span class="na">Ack</span> <span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">GetId</span> <span class="o">());</span> <span class="c1">// Acknowledge message</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>TTL Application</strong>: Redis EX 1 minute. Challenge: Early expiration; Handling: Refresh mechanism.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">redis</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">CacheManager</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">;</span> <span class="c1">// Redis client</span>
  
    <span class="nc">Public</span> <span class="nf">CacheManager</span> <span class="o">(</span><span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Jedis</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="nc">Public</span> <span class="kt">void</span> <span class="nf">setWithTTL</span> <span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">value</span><span class="o">,</span> <span class="kt">int</span> <span class="n">seconds</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Jedis</span><span class="o">.</span><span class="na">Setex</span> <span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">seconds</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span> <span class="c1">// Set key-value with TTL</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Worker Query</strong>: First Redis, fallback to MySQL on miss.</p> <p>Code Example (Java):</p> <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nc">Package</span> <span class="n">com</span><span class="o">.</span> <span class="nc">Example</span><span class="o">.</span> <span class="nc">Notification</span><span class="o">;</span>
  
<span class="nc">Import</span> <span class="n">org</span><span class="o">.</span> <span class="nc">Springframework</span><span class="o">.</span> <span class="nc">Jdbc</span><span class="o">.</span> <span class="nc">Core</span><span class="o">.</span> <span class="nc">JdbcTemplate</span><span class="o">;</span>
<span class="nc">Import</span> <span class="n">redis</span><span class="o">.</span> <span class="nc">Clients</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">.</span> <span class="nc">Jedis</span><span class="o">;</span>
  
<span class="nc">Public</span> <span class="kd">class</span> <span class="nc">SubscriptionChecker</span> <span class="o">{</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">;</span> <span class="c1">// Redis client</span>
    <span class="nc">Private</span> <span class="kd">final</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span> <span class="c1">// JDBC template</span>
  
    <span class="nc">Public</span> <span class="nf">SubscriptionChecker</span> <span class="o">(</span><span class="nc">Jedis</span> <span class="n">jedis</span><span class="o">,</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">Jedis</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">;</span>
        <span class="nc">This</span><span class="o">.</span> <span class="nc">JdbcTemplate</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
    <span class="o">}</span>
  
    <span class="nc">Public</span> <span class="nc">String</span> <span class="nf">isUnsubscribed</span> <span class="o">(</span><span class="nc">String</span> <span class="n">userId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">unsub</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">.</span><span class="na">Get</span> <span class="o">(</span><span class="s">"unsub: "</span> <span class="o">+</span> <span class="n">userId</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">type</span><span class="o">);</span> <span class="c1">// First check Redis</span>
        <span class="nc">If</span> <span class="o">(</span><span class="n">unsub</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// If miss</span>
            <span class="nc">Unsub</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">QueryForObject</span> <span class="o">(</span><span class="s">"SELECT is_unsubscribed FROM unsubscriptions WHERE user_id=? AND notification_type=?"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span> <span class="nc">Class</span><span class="o">,</span> <span class="n">userId</span><span class="o">,</span> <span class="n">type</span><span class="o">);</span> <span class="c1">// Query MySQL</span>
            <span class="nc">Jedis</span><span class="o">.</span><span class="na">Setex</span> <span class="o">(</span><span class="s">"unsub: "</span> <span class="o">+</span> <span class="n">userId</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">type</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="n">unsub</span><span class="o">);</span> <span class="c1">// Cache result</span>
        <span class="o">}</span>
        <span class="nc">Return</span> <span class="n">unsub</span><span class="o">;</span> <span class="c1">// Return result</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li> <p><strong>Monitoring</strong>: Sync latency &gt;5 s alerts.</p> </li> </ol> <p>Expected Effects: Consistency latency &lt;1 s, mis-delivery &lt;0.1%. Trade-off: Canal deployment requires resources, but high security.</p> </li> </ul> <hr> <h2 id="9-optimization-performance-and-cost">9. Optimization (Performance and Cost)</h2> <h3 id="91-performance-optimization">9.1. Performance Optimization</h3> <ul> <li> <strong>Batch Processing</strong>: SMS/emails in batches of 1000 to reduce API calls.</li> <li> <strong>Cache Preheating</strong>: Preload Redis for popular user unsubscribes.</li> <li> <strong>Network Optimization</strong>: HTTP/2 multiplexing, long connection pools.</li> <li> <strong>Lazy Loading</strong>: Paginated log queries, ES aggregations.</li> </ul> <h3 id="92-cost-optimization">9.2. Cost Optimization</h3> <ul> <li> <strong>Provider Dynamic Switching</strong>: Monitor costs and switch to lower-price providers.</li> <li> <strong>Invalid Push Cleanup</strong>: Weekly cleanup of 10% invalid tokens.</li> <li> <strong>Serverless</strong>: Use AWS Lambda for low-priority tasks.</li> <li> <strong>Compression</strong>: Gzip notification content to save 20% traffic.</li> </ul> <h3 id="93-security-considerations">9.3. Security Considerations</h3> <ul> <li> <strong>Authentication and Authorization</strong>: JWT/OAuth, multi-factor authentication.</li> <li> <strong>Data Protection</strong>: HTTPS transmission, static AES-256. Notification content desensitization: Automatically mask sensitive fields (e.g., PII) in routing and logs using libraries like Apache Commons Text for regex replacement; decrypt only before Worker sending.</li> <li> <strong>Content Protection</strong>: Sensitive word filtering, DRM watermarking.</li> <li> <strong>API Security</strong>: Input validation, rate limiting, WAF.</li> <li> <strong>DDoS Protection</strong>: Cloudflare.</li> <li> <strong>Audit Logs</strong>: Record operations to ES.</li> </ul> <h3 id="94-monitoring-and-operations">9.4. Monitoring and Operations</h3> <ul> <li> <strong>Metrics</strong>: QPS, latency, success rate, lag.</li> <li> <strong>Logs</strong>: JSON format, TraceID.</li> <li> <strong>Alerts</strong>: Prometheus rules, PagerDuty.</li> <li> <strong>Automation</strong>: CI/CD, zero-downtime configurations.</li> </ul> <hr> <h2 id="summary">Summary</h2> <p>This design constructs a highly available and scalable notification system, addressing various challenges through technologies like Kafka asynchronous decoupling, Redis caching, and multi-provider routing. Core processes focus on sending and unsubscribing, with bottleneck analysis providing targeted optimizations to ensure stability under high loads. Actual implementation should iterate based on scale, emphasizing trade-offs (e.g., third-party vs. In-house) and cost control. These elements provide a comprehensive technical framework for building similar notification systems.</p> <p><strong>Overall Sequence Diagram (Combined Send Notification and Unsubscribe Version)</strong>:</p> <pre><code class="language-mermaid">sequenceDiagram
    Participant B as Business Side
    Participant A as API Gateway
    Participant R as Routing Engine
    Participant K as Kafka
    Participant W as Worker
    Participant Rd as Redis
    Participant T as Third-Party
    Participant M as MySQL
    Participant C as Canal
    Participant U as User
    Participant E as Elasticsearch
    B-&gt;&gt;A: POST /send (Send Notification)
    A-&gt;&gt;R: Forward Request
    R-&gt;&gt;K: Write to Topic
    K-&gt;&gt;W: Consume Message
    W-&gt;&gt;Rd: Query Unsubscribe Status
    Rd--&gt;&gt;W: Return Status
    Alt Not Unsubscribed
        W-&gt;&gt;T: Send Notification
        T--&gt;&gt;W: Response Result
        W-&gt;&gt;E: Record Log (Success)
    Else Unsubscribed
        W-&gt;&gt;E: Record Log (Skip)
    End
    W-&gt;&gt;K: Commit Offset
    U-&gt;&gt;A: POST /unsubscribe (Unsubscribe Request)
    A-&gt;&gt;M: Update MySQL Record
    M-&gt;&gt;C: Binlog Event
    C-&gt;&gt;Rd: Sync Update Cache
    Rd--&gt;&gt;W: (Subsequent Queries Use Updated Status)
</code></pre> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Reverse-LinkedList/">Reverse LinkedList</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/LeftRightPointers/">双指针 - 左右指针</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/FastSlowPointers/">双指针 - 快慢指针</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/DynamicLengthSlidingWindow/">双指针 - 滑动窗口</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/TodoList/">Todo List</a> </li> <div id="giscus_thread" style="max-width: 930px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"zhengstar94/zhengstar94.github.io","data-repo-id":"R_kgDOMKQWcA","data-category":"Comments","data-category-id":"DIC_kwDOMKQWcM4CgKT_","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Xingxing Zheng. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script>let mermaidTheme=determineComputedTheme();document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(document.querySelectorAll("pre>code.language-mermaid").forEach(e=>{const t=e.textContent,d=e.parentElement;d.classList.add("unloaded");let a=document.createElement("pre");a.classList.add("mermaid");const n=document.createTextNode(t);a.appendChild(n),d.after(a)}),mermaid.initialize({theme:mermaidTheme}),"undefined"!=typeof d3&&window.addEventListener("load",function(){d3.selectAll(".mermaid svg").each(function(){var e=d3.select(this);e.html("<g>"+e.html()+"</g>");var t=e.select("g"),d=d3.zoom().on("zoom",function(e){t.attr("transform",e.transform)});e.call(d)})}))});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.22.4/dist/bootstrap-table.min.js" integrity="sha256-4rppopQE9POKfukn2kEvhJ9Um25Cf6+IDVkARD0xh78=" crossorigin="anonymous"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?06cae41083477f121be8cd9797ad8e2f"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-learning",title:"learning",description:"Personal learning",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"CV",description:"Personal CV, updated on 18 Jun, 2024",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"dropdown-by-year",title:"by year",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-by-category",title:"by category",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"post-reverse-linkedlist",title:"Reverse LinkedList",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/Reverse-LinkedList/"}},{id:"post-\u53cc\u6307\u9488-\u5de6\u53f3\u6307\u9488",title:"\u53cc\u6307\u9488 - \u5de6\u53f3\u6307\u9488",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/LeftRightPointers/"}},{id:"post-\u53cc\u6307\u9488-\u5feb\u6162\u6307\u9488",title:"\u53cc\u6307\u9488 - \u5feb\u6162\u6307\u9488",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/FastSlowPointers/"}},{id:"post-\u53cc\u6307\u9488-\u6ed1\u52a8\u7a97\u53e3",title:"\u53cc\u6307\u9488 - \u6ed1\u52a8\u7a97\u53e3",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/DynamicLengthSlidingWindow/"}},{id:"post-todo-list",title:"Todo List",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/TodoList/"}},{id:"post-twitter-notification-and-real-time-push-system-design-detailed-guide",title:"Twitter Notification and Real-Time Push System Design Detailed Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/TwitterNotificationAndReal-TimePushSystemDesignDetailedGuide/"}},{id:"post-twitter-database-read-and-write-and-sharding-system-design-detailed-guide",title:"Twitter Database Read and Write and Sharding System Design Detailed Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/TwitterDatabaseReadAndWriteAndShardingSystemDesignDetailedGuide/"}},{id:"post-detailed-system-design-of-twitter-timeline-generation",title:"Detailed System Design of Twitter Timeline Generation",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/DetailedSystemDesignOfTwitterTimelineGeneration/"}},{id:"post-technical-guide-to-distributed-unique-ids",title:"Technical Guide to Distributed Unique IDs",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/TechnicalGuideToDistributedUniqueIDs/"}},{id:"post-algorithm-of-rate-limiter",title:"Algorithm of Rate Limiter",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/AlgorithmOfRateLimiter/"}},{id:"post-best-practices-for-incident-response",title:"Best Practices for Incident Response",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/BestPracticesForIncidentResponse/"}},{id:"post-group-cycle",title:"Group cycle",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/GroupCycle/"}},{id:"post-floyd-39-s-algorithm-for-finding-duplicate-number",title:"Floyd's Algorithm for Finding Duplicate Number",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/FloydAlgorithmForFindingDuplicateNumber/"}},{id:"post-jdbcbatchupdate",title:"JDBCBatchUpdate",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/JDBCBatchUpdate/"}},{id:"post-sort",title:"SORT",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/SORT/"}},{id:"post-levenshtein-distance-algorithm",title:"Levenshtein Distance Algorithm",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/LevenshteinDistanceAlgorithm/"}},{id:"post-mastering-coin-change-with-dynamic-programming",title:"Mastering Coin Change with Dynamic Programming",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/MasteringCoinChangeWithDynamicProgramming/"}},{id:"post-union-find",title:"Union-Find",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/Union-Find/"}},{id:"post-prefix-sum",title:"Prefix Sum",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/PrefixSum/"}},{id:"post-morris",title:"Morris",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/Morris/"}},{id:"post-lru-linkedlist",title:"LRU LinkedList",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2023/LRU-LinkedList/"}},{id:"post-designing-a-tiny-url",title:"Designing a Tiny URL",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/TypeURLInYourBrowser/"}},{id:"post-what-happens-when-you-type-url-in-your-browser",title:"What happens when you type URL in your browser",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/WhatHappensWhenYouYypeURLInYourBrowser/"}},{id:"post-when-to-use-the-different-log-levels",title:"When to use the different log levels",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/WhenToUseTheDifferentLogLevels/"}},{id:"post-system-design\u5b66\u4e60",title:"System Design\u5b66\u4e60",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/SystemDesign%E5%AD%A6%E4%B9%A0/"}},{id:"post-system-design\u9762\u8bd5\u5efa\u8bae",title:"System Design\u9762\u8bd5\u5efa\u8bae",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/SystemDesign%E9%9D%A2%E8%AF%95%E5%BB%BA%E8%AE%AE/"}},{id:"post-\u5982\u4f55\u5199\u4e00\u4e2a\u5e76\u884c\u8c03\u7528\u6a21\u7248",title:"\u5982\u4f55\u5199\u4e00\u4e2a\u5e76\u884c\u8c03\u7528\u6a21\u7248",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%80%E4%B8%AA%E5%B9%B6%E8%A1%8C%E8%B0%83%E7%94%A8%E6%A8%A1%E7%89%88/"}},{id:"post-\u67b6\u6784\u8bbe\u8ba1\u4e4b\u5fbd\u670d\u52a1\u62c6\u5206",title:"\u67b6\u6784\u8bbe\u8ba1\u4e4b\u5fbd\u670d\u52a1\u62c6\u5206",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B9%8B%E5%BE%BD%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/"}},{id:"post-\u5982\u4f55\u8bbe\u8ba1\u597d\u4e00\u4e2a\u63a5\u53e3",title:"\u5982\u4f55\u8bbe\u8ba1\u597d\u4e00\u4e2a\u63a5\u53e3",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E5%A5%BD%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3/"}},{id:"post-\u624b\u5199lru",title:"\u624b\u5199LRU",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E6%89%8B%E5%86%99LRU/"}},{id:"post-\u5982\u4f55\u5b9e\u73b0\u8ba2\u5355\u4e3b\u52a8\u8fc7\u671f\u91ca\u653e",title:"\u5982\u4f55\u5b9e\u73b0\u8ba2\u5355\u4e3b\u52a8\u8fc7\u671f\u91ca\u653e",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%AE%A2%E5%8D%95%E4%B8%BB%E5%8A%A8%E8%BF%87%E6%9C%9F%E9%87%8A%E6%94%BE/"}},{id:"post-\u963f\u91cc\u4e91\u77ed\u4fe1\u9a8c\u8bc1\u670d\u52a1",title:"\u963f\u91cc\u4e91\u77ed\u4fe1\u9a8c\u8bc1\u670d\u52a1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1/"}},{id:"post-\u65e5\u5fd7\u7684\u4f7f\u7528",title:"\u65e5\u5fd7\u7684\u4f7f\u7528",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E6%97%A5%E5%BF%97%E7%9A%84%E4%BD%BF%E7%94%A8/"}},{id:"post-\u5982\u4f55\u9ad8\u6548\u5bf9\u63a5\u7b2c\u4e09\u65b9\u652f\u4ed8",title:"\u5982\u4f55\u9ad8\u6548\u5bf9\u63a5\u7b2c\u4e09\u65b9\u652f\u4ed8",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%AF%B9%E6%8E%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/"}},{id:"post-\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u9ad8\u5e76\u53d1\u573a\u666f",title:"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u9ad8\u5e76\u53d1\u573a\u666f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF/"}},{id:"post-\u56fe\u7247\u9a8c\u8bc1\u7801\u529f\u80fd",title:"\u56fe\u7247\u9a8c\u8bc1\u7801\u529f\u80fd",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD/"}},{id:"post-xxljob\u5206\u5e03\u5f0f\u5b9a\u65f6\u4efb\u52a1\u6846\u67b6\u4e0e\u7cfb\u7edf\u7684\u63a5\u5165",title:"xxljob\u5206\u5e03\u5f0f\u5b9a\u65f6\u4efb\u52a1\u6846\u67b6\u4e0e\u7cfb\u7edf\u7684\u63a5\u5165",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/xxljob%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8E%A5%E5%85%A5/"}},{id:"post-\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ad9\u5185\u6d88\u606f\u7cfb\u7edf",title:"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u7ad9\u5185\u6d88\u606f\u7cfb\u7edf\uff1f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%AB%99%E5%86%85%E6%B6%88%E6%81%AF%E7%B3%BB%E7%BB%9F/"}},{id:"post-\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u79d2\u6740\u7cfb\u7edf",title:"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u79d2\u6740\u7cfb\u7edf\uff1f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F/"}},{id:"post-\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u77ed\u94fe\u7cfb\u7edf",title:"\u5982\u4f55\u8bbe\u8ba1\u4e00\u4e2a\u77ed\u94fe\u7cfb\u7edf\uff1f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F/"}},{id:"post-\u5982\u4f55\u89e3\u51b3\u7f51\u7ad9\u5927\u6587\u4ef6\u4e0a\u4f20\u95ee\u9898",title:"\u5982\u4f55\u89e3\u51b3\u7f51\u7ad9\u5927\u6587\u4ef6\u4e0a\u4f20\u95ee\u9898\uff1f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E7%BD%91%E7%AB%99%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%97%AE%E9%A2%98/"}},{id:"post-\u5982\u4f55\u7edf\u8ba1\u7f51\u7ad9uv",title:"\u5982\u4f55\u7edf\u8ba1\u7f51\u7ad9UV\uff1f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E7%BB%9F%E8%AE%A1%E7%BD%91%E7%AB%99UV/"}},{id:"post-\u4e94\u95e8cs\u57fa\u7840\u8bfe\u63a8\u8350",title:"\u4e94\u95e8CS\u57fa\u7840\u8bfe\u63a8\u8350",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E4%BA%94%E9%97%A8CS%E5%9F%BA%E7%A1%80%E8%AF%BE%E6%8E%A8%E8%8D%90/"}},{id:"post-\u6e7e\u533a\u5927\u5382\u7a0b\u5e8f\u5458\u85aa\u6c34\u6784\u6210level\u548c\u5bf9\u5e94\u671f\u671b",title:"\u6e7e\u533a\u5927\u5382\u7a0b\u5e8f\u5458\u85aa\u6c34\u6784\u6210level\u548c\u5bf9\u5e94\u671f\u671b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E6%B9%BE%E5%8C%BA%E5%A4%A7%E5%8E%82%E7%A8%8B%E5%BA%8F%E5%91%98%E8%96%AA%E6%B0%B4%E6%9E%84%E6%88%90level%E5%92%8C%E5%AF%B9%E5%BA%94%E6%9C%9F%E6%9C%9B/"}},{id:"post-\u5982\u4f55\u505a\u7f16\u7a0b\u77e5\u8bc6\u6295\u8d44\u53ca\u51cf\u5c11\u77e5\u8bc6\u5931\u6548\u7684\u5f71\u54cd",title:"\u5982\u4f55\u505a\u7f16\u7a0b\u77e5\u8bc6\u6295\u8d44\u53ca\u51cf\u5c11\u77e5\u8bc6\u5931\u6548\u7684\u5f71\u54cd",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%A6%82%E4%BD%95%E5%81%9A%E7%BC%96%E7%A8%8B%E7%9F%A5%E8%AF%86%E6%8A%95%E8%B5%84%E5%8F%8A%E5%87%8F%E5%B0%91%E7%9F%A5%E8%AF%86%E5%A4%B1%E6%95%88%E7%9A%84%E5%BD%B1%E5%93%8D/"}},{id:"post-\u8f93\u5165url\u9875\u9762\u6ca1\u51fa\u73b0\u5982\u4f55\u6392\u67e5",title:"\u8f93\u5165URL\u9875\u9762\u6ca1\u51fa\u73b0\u5982\u4f55\u6392\u67e5",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E8%BE%93%E5%85%A5URL%E9%A1%B5%E9%9D%A2%E6%B2%A1%E5%87%BA%E7%8E%B0%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5/"}},{id:"post-jwt\u57fa\u7840",title:"JWT\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/JWT%E5%9F%BA%E7%A1%80/"}},{id:"post-binary-search-universal-formula",title:"Binary Search Universal Formula",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/BinarySearchUniversalFormula/"}},{id:"post-\u5206\u5e03\u5f0f\u7cfb\u7d71\u63a5\u53e3\u5982\u4f55\u907f\u514d\u8868\u5355\u7684\u91cd\u590d\u63d0\u4ea4",title:"\u5206\u5e03\u5f0f\u7cfb\u7d71\u63a5\u53e3\u5982\u4f55\u907f\u514d\u8868\u5355\u7684\u91cd\u590d\u63d0\u4ea4",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%B5%B1%E6%8E%A5%E5%8F%A3%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E8%A1%A8%E5%8D%95%E7%9A%84%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4/"}},{id:"post-zookeeper\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501",title:"Zookeeper\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/Zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"}},{id:"post-tcc\u5b9e\u4f8b",title:"TCC\u5b9e\u4f8b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/TCC%E5%AE%9E%E4%BE%8B/"}},{id:"post-\u57fa\u4e8erocketmq\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1",title:"\u57fa\u4e8erocketmq\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%9F%BA%E4%BA%8Erocketmq%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"}},{id:"post-\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848part2",title:"\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848Part2",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88Part2/"}},{id:"post-\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848part1",title:"\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848Part1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88Part1/"}},{id:"post-pythonday1",title:"PythonDay1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/PythonDay1/"}},{id:"post-linuxday3",title:"LinuxDay3",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/LinuxDay3/"}},{id:"post-linuxday2",title:"LinuxDay2",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/LinuxDay2/"}},{id:"post-linuxday1",title:"LinuxDay1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/LinuxDay1/"}},{id:"post-\u91cc\u6c0f\u66ff\u6362\u539f\u5219",title:"\u91cc\u6c0f\u66ff\u6362\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99/"}},{id:"post-\u8fea\u7c73\u7279\u6cd5\u5219",title:"\u8fea\u7c73\u7279\u6cd5\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/"}},{id:"post-\u63a5\u53e3\u5206\u79bb\u539f\u5219",title:"\u63a5\u53e3\u5206\u79bb\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%8E%A5%E5%8F%A3%E5%88%86%E7%A6%BB%E5%8E%9F%E5%88%99/"}},{id:"post-\u4f9d\u8d56\u5012\u7f6e\u539f\u5219",title:"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99/"}},{id:"post-\u5355\u4e00\u539f\u5219",title:"\u5355\u4e00\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%8D%95%E4%B8%80%E5%8E%9F%E5%88%99/"}},{id:"post-\u5f00\u95ed\u539f\u5219",title:"\u5f00\u95ed\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99/"}},{id:"post-\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u539f\u5219",title:"\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u539f\u5219",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"}},{id:"post-\u5355\u4f8b\u6a21\u5f0f",title:"\u5355\u4f8b\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u9002\u914d\u5668\u6a21\u5f0f",title:"\u9002\u914d\u5668\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u5efa\u9020\u8005\u6a21\u5f0f",title:"\u5efa\u9020\u8005\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f",title:"\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u7b80\u5355\u5de5\u5382\u6a21\u5f0f",title:"\u7b80\u5355\u5de5\u5382\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f",title:"\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"}},{id:"post-\u521b\u5efa\u578b\u8bbe\u8ba1\u6a21\u5f0f",title:"\u521b\u5efa\u578b\u8bbe\u8ba1\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%88%9B%E5%BB%BA%E5%9E%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}},{id:"post-uml\u7c7b\u56fe",title:"UML\u7c7b\u56fe",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/UML%E7%B1%BB%E5%9B%BE/"}},{id:"post-\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u8fc7\u7a0b",title:"\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u8fc7\u7a0b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BE%E8%AE%A1%E8%BF%87%E7%A8%8B/"}},{id:"post-elasticsearch\u90e8\u7f72",title:"ElasticSearch\u90e8\u7f72",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ElasticSearch%E9%83%A8%E7%BD%B2/"}},{id:"post-elasticsearch\u57fa\u7840",title:"ElasticSearch\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ElasticSearch%E5%9F%BA%E7%A1%80/"}},{id:"post-\u8868\u9a71\u52a8\u6cd5",title:"\u8868\u9a71\u52a8\u6cd5",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E8%A1%A8%E9%A9%B1%E5%8A%A8%E6%B3%95/"}},{id:"post-\u672c\u5730jar\u5f15\u5165\u5230maven\u65b9\u5f0f",title:"\u672c\u5730jar\u5f15\u5165\u5230maven\u65b9\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%9C%AC%E5%9C%B0jar%E5%BC%95%E5%85%A5%E5%88%B0maven%E6%96%B9%E5%BC%8F/"}},{id:"post-windows10\u5173\u95ed\u7aef\u53e3\u5360\u7528\u8fdb\u7a0b",title:"Windows10\u5173\u95ed\u7aef\u53e3\u5360\u7528\u8fdb\u7a0b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Windows10%E5%85%B3%E9%97%AD%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E8%BF%9B%E7%A8%8B/"}},{id:"post-js\u4e0a\u7cbe\u5ea6\u4e22\u5931\u89e3\u51b3\u65b9\u6848",title:"js\u4e0a\u7cbe\u5ea6\u4e22\u5931\u89e3\u51b3\u65b9\u6848",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/js%E4%B8%8A%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"}},{id:"post-linux\u73af\u5883\u4e0b\u5b89\u88c5svn",title:"Linux\u73af\u5883\u4e0b\u5b89\u88c5svn",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85svn/"}},{id:"post-\u6d88\u606f\u7684\u5ef6\u65f6\u4ee5\u53ca\u5931\u6548\u95ee\u9898",title:"\u6d88\u606f\u7684\u5ef6\u65f6\u4ee5\u53ca\u5931\u6548\u95ee\u9898",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%B6%88%E6%81%AF%E7%9A%84%E5%BB%B6%E6%97%B6%E4%BB%A5%E5%8F%8A%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/"}},{id:"post-\u5982\u4f55\u5904\u7406\u6d88\u606f\u4e22\u5931\u7684\u95ee\u9898",title:"\u5982\u4f55\u5904\u7406\u6d88\u606f\u4e22\u5931\u7684\u95ee\u9898",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98/"}},{id:"post-\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u961f\u5217\u7684\u9ad8\u53ef\u7528",title:"\u5982\u4f55\u4fdd\u8bc1\u6d88\u606f\u961f\u5217\u7684\u9ad8\u53ef\u7528",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E9%AB%98%E5%8F%AF%E7%94%A8/"}},{id:"post-\u6d88\u606f\u7684\u5e42\u7b49\u6027",title:"\u6d88\u606f\u7684\u5e42\u7b49\u6027",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%B6%88%E6%81%AF%E7%9A%84%E5%B9%82%E7%AD%89%E6%80%A7/"}},{id:"post-\u6d88\u606f\u7684\u987a\u5e8f\u6027",title:"\u6d88\u606f\u7684\u987a\u5e8f\u6027",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%B6%88%E6%81%AF%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%80%A7/"}},{id:"post-mq\u57fa\u7840",title:"MQ\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MQ%E5%9F%BA%E7%A1%80/"}},{id:"post-\u5982\u4f55\u9ad8\u6548\u7684\u4f7f\u7528-git",title:"\u5982\u4f55\u9ad8\u6548\u7684\u4f7f\u7528 Git",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E7%9A%84%E4%BD%BF%E7%94%A8Git/"}},{id:"post-\u642d\u5efaspringcloud\u9879\u76ee",title:"\u642d\u5efaSpringCloud\u9879\u76ee",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%90%AD%E5%BB%BASpringCloud%E9%A1%B9%E7%9B%AE/"}},{id:"post-spring\u4e0eredis\u901a\u4fe1\u8bbe\u8ba1\u7ed3\u6784\u56fe",title:"Spring\u4e0eRedis\u901a\u4fe1\u8bbe\u8ba1\u7ed3\u6784\u56fe",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E4%B8%8ERedis%E9%80%9A%E4%BF%A1%E8%AE%BE%E8%AE%A1%E7%BB%93%E6%9E%84%E5%9B%BE/"}},{id:"post-springboot\u81ea\u52a8\u88c5\u914d\u539f\u7406",title:"Springboot\u81ea\u52a8\u88c5\u914d\u539f\u7406",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Springboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86/"}},{id:"post-springboot",title:"SpringBoot",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/SpringBoot/"}},{id:"post-spring\u5faa\u73af\u4f9d\u8d56",title:"Spring\u5faa\u73af\u4f9d\u8d56",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/"}},{id:"post-spring\u7684\u751f\u547d\u5468\u671f",title:"Spring\u7684\u751f\u547d\u5468\u671f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"}},{id:"post-spring\u624b\u5199\u5b9e\u73b0aop",title:"Spring\u624b\u5199\u5b9e\u73b0AOP",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0AOP/"}},{id:"post-spring\u7684aop",title:"Spring\u7684AOP",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E7%9A%84AOP/"}},{id:"post-spring\u7684ioc\u542f\u52a8\u8fc7\u7a0b",title:"Spring\u7684IOC\u542f\u52a8\u8fc7\u7a0b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E7%9A%84IOC%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/"}},{id:"post-spring\u57fa\u7840",title:"Spring\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring%E5%9F%BA%E7%A1%80/"}},{id:"post-solving-problems-from-scratch",title:"Solving problems from scratch",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/SolvingProblemsFromScratch/"}},{id:"post-architecture-design",title:"Architecture Design",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ArchitectureDesign/"}},{id:"post-final",title:"Final",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Final/"}},{id:"post-design-pattern",title:"Design Pattern",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Design-Pattern/"}},{id:"post-distributed",title:"Distributed",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Distributed/"}},{id:"post-mq",title:"MQ",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MQ/"}},{id:"post-spring",title:"Spring",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Spring/"}},{id:"post-computer",title:"Computer",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Computer/"}},{id:"post-redis",title:"Redis",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis/"}},{id:"post-jvm",title:"Jvm",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/JVM/"}},{id:"post-thread",title:"Thread",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Thread/"}},{id:"post-collection",title:"Collection",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Collection/"}},{id:"post-base",title:"Base",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Base/"}},{id:"post-mysql",title:"MYSQL",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MYSQL/"}},{id:"post-interview",title:"Interview",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Interview/"}},{id:"post-jvm\u8c03\u4f18\u5de5\u5177\u4e0e\u8c03\u4f18\u5b9e\u6218",title:"JVM\u8c03\u4f18\u5de5\u5177\u4e0e\u8c03\u4f18\u5b9e\u6218",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/JVM%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%98/"}},{id:"post-java\u7ebf\u4e0a\u95ee\u9898\u6392\u67e5\u601d\u8def\u4e0e\u5de5\u5177",title:"Java\u7ebf\u4e0a\u95ee\u9898\u6392\u67e5\u601d\u8def\u4e0e\u5de5\u5177",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Java%E7%BA%BF%E4%B8%8A%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AF%E4%B8%8E%E5%B7%A5%E5%85%B7/"}},{id:"post-jvm\u4e4b\u7c7b\u52a0\u8f7d\u4e0e\u53cc\u4eb2\u59d4\u6d3e",title:"JVM\u4e4b\u7c7b\u52a0\u8f7d\u4e0e\u53cc\u4eb2\u59d4\u6d3e",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/JVM%E4%B9%8B%E7%B1%BB%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE/"}},{id:"post-jvm\u57fa\u7840",title:"JVM\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/JVM%E5%9F%BA%E7%A1%80/"}},{id:"post-io\u6a21\u578b",title:"IO\u6a21\u578b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/IO%E6%A8%A1%E5%9E%8B/"}},{id:"post-\u4e3a\u4ec0\u4e48tcp\u5efa\u7acb\u8fde\u63a5\u9700\u8981\u4e09\u6b21\u63e1\u624b",title:"\u4e3a\u4ec0\u4e48TCP\u5efa\u7acb\u8fde\u63a5\u9700\u8981\u4e09\u6b21\u63e1\u624b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E4%B8%BA%E4%BB%80%E4%B9%88TCP%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E9%9C%80%E8%A6%81%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/"}},{id:"post-tcp\u7684\u4e09\u6b21\u63e1\u624b\u4e0e\u56db\u6b21\u6325\u624b",title:"TCP\u7684\u4e09\u6b21\u63e1\u624b\u4e0e\u56db\u6b21\u6325\u624b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/TCP%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc\u57fa\u7840",title:"\u8ba1\u7b97\u673a\u7f51\u7edc\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"}},{id:"post-countdownlatch",title:"CountDownLatch",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/CountDownLatch/"}},{id:"post-aqs\u6e90\u7801\u5206\u6790",title:"AQS\u6e90\u7801\u5206\u6790",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/AQS%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}},{id:"post-abstractqueuedsynchronizer",title:"AbstractQueuedSynchronizer",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/AbstractQueuedSynchronizer/"}},{id:"post-reentrantlock",title:"ReentrantLock",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ReentrantLock/"}},{id:"post-synchronized",title:"Synchronized",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Synchronized/"}},{id:"post-volatile",title:"Volatile",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Volatile/"}},{id:"post-threadlocal",title:"ThreadLocal",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ThreadLocal/"}},{id:"post-\u9501\u7684\u5206\u7c7b",title:"\u9501\u7684\u5206\u7c7b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E9%94%81%E7%9A%84%E5%88%86%E7%B1%BB/"}},{id:"post-\u7ebf\u7a0b\u6c60\u4e1a\u52a1\u4e2d\u7684\u5b9e\u8df5",title:"\u7ebf\u7a0b\u6c60\u4e1a\u52a1\u4e2d\u7684\u5b9e\u8df5",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%9A%E5%8A%A1%E4%B8%AD%E7%9A%84%E5%AE%9E%E8%B7%B5/"}},{id:"post-\u7ebf\u7a0b\u6c60",title:"\u7ebf\u7a0b\u6c60",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"}},{id:"post-redis\u5de5\u5177\u7c7b",title:"Redis\u5de5\u5177\u7c7b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%B7%A5%E5%85%B7%E7%B1%BB/"}},{id:"post-\u8df3\u8868",title:"\u8df3\u8868",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E8%B7%B3%E8%A1%A8/"}},{id:"post-\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u5b9e\u73b0",title:"\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u5b9e\u73b0",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/"}},{id:"post-\u5206\u5e03\u5f0f\u9501\u5bf9\u6bd4",title:"\u5206\u5e03\u5f0f\u9501\u5bf9\u6bd4",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AF%B9%E6%AF%94/"}},{id:"post-redis\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u4e0eredisson",title:"Redis\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u4e0eRedisson",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E4%B8%8ERedisson/"}},{id:"post-redis\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u95012",title:"Redis\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u95012",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%812/"}},{id:"post-redis\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u9501",title:"Redis\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u9501",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"}},{id:"post-redis\u54c8\u5e0c\u69fd\u5b9e\u6218",title:"Redis\u54c8\u5e0c\u69fd\u5b9e\u6218",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%93%88%E5%B8%8C%E6%A7%BD%E5%AE%9E%E6%88%98/"}},{id:"post-rediscluster",title:"RedisCluster",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/RedisCluster/"}},{id:"post-redis\u96c6\u7fa4\u89e3\u51b3\u65b9\u6848",title:"Redis\u96c6\u7fa4\u89e3\u51b3\u65b9\u6848",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E9%9B%86%E7%BE%A4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"}},{id:"post-redis\u4e3b\u4ece\u67b6\u6784",title:"Redis\u4e3b\u4ece\u67b6\u6784",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84/"}},{id:"post-redis\u5982\u4f55\u505a\u5230\u9ad8\u53ef\u7528",title:"Redis\u5982\u4f55\u505a\u5230\u9ad8\u53ef\u7528",description:"",section:"Posts",handler:()=>{
window.location.href="/blog/2021/Redis%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E9%AB%98%E5%8F%AF%E7%94%A8/"}},{id:"post-redis\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b",title:"Redis\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"}},{id:"post-redis\u57fa\u7840",title:"Redis\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Redis%E5%9F%BA%E7%A1%80/"}},{id:"post-mysql\u6392\u67e5\u95ee\u9898",title:"MYSQL\u6392\u67e5\u95ee\u9898",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MYSQL%E6%8E%92%E6%9F%A5%E9%97%AE%E9%A2%98/"}},{id:"post-\u8bfb\u5199\u5206\u79bb",title:"\u8bfb\u5199\u5206\u79bb",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/"}},{id:"post-\u5206\u5e93\u5206\u8868\u505a\u5230\u6c38\u4e0d\u8fc1\u79fb\u6570\u636e\u548c\u907f\u514d\u70ed\u70b9",title:"\u5206\u5e93\u5206\u8868\u505a\u5230\u6c38\u4e0d\u8fc1\u79fb\u6570\u636e\u548c\u907f\u514d\u70ed\u70b9",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%81%9A%E5%88%B0%E6%B0%B8%E4%B8%8D%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E5%92%8C%E9%81%BF%E5%85%8D%E7%83%AD%E7%82%B9/"}},{id:"post-\u5206\u5e93\u5206\u8868\u5b9e\u6218",title:"\u5206\u5e93\u5206\u8868\u5b9e\u6218",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%AE%9E%E6%88%98/"}},{id:"post-\u5206\u5e93\u5206\u8868",title:"\u5206\u5e93\u5206\u8868",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%88%86%E8%A1%A8%E5%88%86%E5%BA%93/"}},{id:"post-mysql\u7684\u4e3b\u4ece\u590d\u5236",title:"MYSQL\u7684\u4e3b\u4ece\u590d\u5236",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MYSQL%E7%9A%84%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"}},{id:"post-mvcc\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236",title:"MVCC\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MVCC%E5%A4%9A%E7%89%88%E6%9C%AC%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6/"}},{id:"post-mysql\u4f18\u5316\u5efa\u8bae",title:"MySQL\u4f18\u5316\u5efa\u8bae",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MySQL%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/"}},{id:"post-mysql\u67e5\u51fa\u91cd\u590d\u7684\u8bb0\u5f55",title:"MySQL\u67e5\u51fa\u91cd\u590d\u7684\u8bb0\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MySQL%E6%9F%A5%E5%87%BA%E9%87%8D%E5%A4%8D%E7%9A%84%E8%AE%B0%E5%BD%95/"}},{id:"post-mysql\u7684\u4e03\u79cdjoin",title:"MySQL\u7684\u4e03\u79cdJOIN",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MySQL%E7%9A%84%E4%B8%83%E7%A7%8DJOIN/"}},{id:"post-mysql\u5982\u4f55\u88ab\u6267\u884c\u7684",title:"MySQL\u5982\u4f55\u88ab\u6267\u884c\u7684",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MySQL%E5%A6%82%E4%BD%95%E8%A2%AB%E6%89%A7%E8%A1%8C%E7%9A%84/"}},{id:"post-mysql\u5e38\u89c1\u95ee\u9898",title:"MYSQL\u5e38\u89c1\u95ee\u9898",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MYSQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"}},{id:"post-mysql\u57fa\u7840",title:"MYSQL\u57fa\u7840",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/MYSQL%E5%9F%BA%E7%A1%80/"}},{id:"post-concurrenthashmap",title:"ConcurrentHashMap",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ConcurrentHashMap/"}},{id:"post-hashmap\u6b7b\u5faa\u73af\u539f\u56e0",title:"HashMap\u6b7b\u5faa\u73af\u539f\u56e0",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/HashMap%E6%AD%BB%E5%BE%AA%E7%8E%AF%E5%8E%9F%E5%9B%A0/"}},{id:"post-hashmap",title:"HashMap",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/HashMap/"}},{id:"post-arraylist\u4e0elinkedlist",title:"ArrayList\u4e0eLinkedList",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ArrayList%E4%B8%8ELinkedList/"}},{id:"post-java8stream\u6d41\u9012\u5f52\u6811\u904d\u5386",title:"Java8Stream\u6d41\u9012\u5f52\u6811\u904d\u5386",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/Java8Stream%E6%B5%81%E9%80%92%E5%BD%92%E6%A0%91%E9%81%8D%E5%8E%86/"}},{id:"post-elasticsearch\u6982\u5ff5",title:"ElasticSearch\u6982\u5ff5",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/ElasticSearch%E6%A6%82%E5%BF%B5/"}},{id:"post-\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316",title:"\u5e8f\u5217\u5316\u4e0e\u53cd\u5e8f\u5217\u5316",description:"an example of a blog post with some code",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"}},{id:"post-\u6ce8\u89e3\u4e0e\u53cd\u5c04",title:"\u6ce8\u89e3\u4e0e\u53cd\u5c04",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2021/%E6%B3%A8%E8%A7%A3%E4%B8%8E%E5%8F%8D%E5%B0%84/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"projects-url-shortener",title:"URL Shortener",description:"How to design a URL Shortener",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-pong-game",title:"Pong Game",description:"Pong Game",section:"Projects",handler:()=>{window.location.href="/projects/PongGame_project/"}},{id:"projects-snake-game",title:"Snake Game",description:"Snake Game",section:"Projects",handler:()=>{window.location.href="/projects/SnakeGame_project/"}},{id:"projects-sheet",title:"Sheet",description:"Google Sheet",section:"Projects",handler:()=>{window.location.href="/projects/GoogleSheet_project/"}},{id:"projects-turtle-crossing-game",title:"Turtle Crossing Game",description:"Turtle Crossing Game",section:"Projects",handler:()=>{window.location.href="/projects/TurtleCrossing_project/"}},{id:"projects-pomodoro",title:"Pomodoro",description:"Pomodoro Timer",section:"Projects",handler:()=>{window.location.href="/projects/Pomodoro_project/"}},{id:"projects-flashy",title:"Flashy",description:"Flash Card",section:"Projects",handler:()=>{window.location.href="/projects/FlashCard/"}},{id:"projects-password",title:"Password",description:"Password Manager",section:"Projects",handler:()=>{window.location.href="/projects/PasswordManager/"}},{id:"projects-email",title:"Email",description:"Auto send birthday email",section:"Projects",handler:()=>{window.location.href="/projects/Email/"}},{id:"projects-habit",title:"Habit",description:"track habit",section:"Projects",handler:()=>{window.location.href="/projects/Habit/"}},{id:"projects-kanye-quotes",title:"Kanye Quotes",description:"Kanye Quotes",section:"Projects",handler:()=>{window.location.href="/projects/KanyeQuotes/"}},{id:"projects-quizzler",title:"Quizzler",description:"Quiz",section:"Projects",handler:()=>{window.location.href="/projects/Quizzler/"}},{id:"projects-rate-limiter",title:"Rate Limiter",description:"How to design a Rate Limiter",section:"Projects",handler:()=>{window.location.href="/projects/1_1_project/"}},{id:"projects-design-twitter",title:"Design Twitter",description:"How to design Twitter",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-design-youtube",title:"Design YouTube",description:"How to design YouTube",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-design-chat",title:"Design Chat",description:"How to design Chat System",section:"Projects",handler:()=>{window.location.href="/projects/4_projectDesignChat/"}},{id:"projects-design-notification",title:"Design Notification",description:"How to design Notification",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-design-ticketmaster",title:"Design TicketMaster",description:"How to design TicketMaster",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%78%69%6E%67%78%69%6E%67%7A%68%65%6E%67%31%39%39%34@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/zhengstar94","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/xingxingzheng","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>